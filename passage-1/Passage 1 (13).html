<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Reading Test - Passage 2: The Importance of Law</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }

        .loading-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9999;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-title {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #9ca3af;
        }

        .start-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9998;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        .start-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .start-button {
            padding: 12px 32px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .start-button:hover {
            background-color: #1d4ed8;
        }

        .hidden {
            display: none !important;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        header {
            background-color: #ffffff;
            color: #333;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .passage-info {
            font-size: 0.9rem;
            font-weight: 500;
            color: #2d3748;
        }

        .timer {
            background-color: rgba(255, 193, 193, 0.5);
            padding: 6px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            min-width: 80px;
            text-align: center;
            font-size: 0.9rem;
            color: #c53030;
            border: 1px solid rgba(255, 120, 120, 0.3);
        }

        .timer.warning {
            color: #9b2c2c;
            background-color: rgba(254, 178, 178, 0.7);
            border-color: rgba(245, 101, 101, 0.5);
        }

        .logo-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            cursor: pointer;
        }

        .logo-area:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }

        .logo-area i {
            font-size: 1.1rem;
        }

        .progress-container {
            background-color: #f8f9fa;
            padding: 4px 20px;
            z-index: 100;
            flex-shrink: 0;
            border-top: 1px solid #e2e8f0;
        }

        .progress-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .progress-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .progress-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            border: 1px solid #cbd5e0;
        }

        .progress-item.current {
            background-color: #4299e1;
            color: white;
            transform: scale(1.1);
            border-color: #2b6cb0;
        }

        .progress-item.answered {
            background-color: #9ae6b4;
            color: #22543d;
            border-color: #68d391;
        }

        .progress-item.correct {
            background-color: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .progress-item.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border-color: #feb2b2;
        }

        .progress-item:hover {
            background-color: #cbd5e0;
            transform: scale(1.05);
        }

        .btn {
            padding: 6px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
            background-color: #f7fafc;
            color: #4a5568;
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-primary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-primary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-secondary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-secondary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-submit {
            background-color: #48bb78;
            color: white;
            font-weight: 900;
            border: 1px solid #38a169;
        }

        .btn-submit:hover {
            background-color: #38a169;
            border-color: #2f855a;
        }

        .btn-submit:disabled {
            background-color: #9ae6b4;
            color: #718096;
            cursor: not-allowed;
            border: 1px solid #68d391;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fafafa;
            position: relative;
        }

        .resizer {
            width: 4px;
            background-color: #cbd5e0;
            cursor: col-resize;
            position: relative;
            transition: background-color 0.2s;
        }

        .resizer:hover {
            background-color: #a0aec0;
        }

        .resizer::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 60px;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: 4px;
            pointer-events: none;
        }

        .questions-container {
            width: 40%;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border-left: 1px solid #e2e8f0;
        }

        .passage {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage-content p {
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage p {
            margin-top: 20px;
            margin-bottom: 25px;
            text-align: justify;
        }

        .question-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background-color: #ffffff;
            transition: box-shadow 0.2s;
        }

        .question:hover {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .option:hover {
            background-color: #f7fafc;
            border-color: #cbd5e0;
        }

        .option input {
            margin-right: 2px;
            width: 16px;
            height: 16px;
        }

        .input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .input-field:focus {
            border-color: #4299e1;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.2);
        }

        select.input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        th,
        td {
            border: 1px solid #e2e8f0;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f1f5f9;
            font-weight: 600;
            color: #2d3748;
        }

        .answer-indicator {
            background-color: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .answer-indicator.correct {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .answer-indicator.incorrect {
            background-color: #fed7d7;
            border-color: #fc8181;
            color: #742a2a;
        }

        .question-group {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-group-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
            font-size: 1rem;
        }

        .highlight {
            background-color: #ffff00;
            cursor: pointer;
        }

        #highlight-btn,
        #remove-highlight-btn {
            position: absolute;
            z-index: 9999;
            display: none;
            padding: 6px 12px;
            font-size: 14px;
            border: 1px solid #888;
            border-radius: 4px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .score-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2d3748;
        }

        .score-breakdown {
            margin: 20px 0;
            text-align: left;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .questions-container {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .resizer {
                width: 100%;
                height: 4px;
                cursor: row-resize;
            }

            .resizer::before {
                width: 60px;
                height: 30px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }

            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .logo-area {
                order: 1;
            }

            .passage-info {
                order: 2;
            }

            .timer {
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }
        }
    </style>
</head>




<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 class="loading-title">Your test will begin shortly</h2>
            <p class="loading-subtitle">Please wait</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen hidden">
        <div class="start-content">
            <h1 class="start-title">IELTSwithJurabek</h1>
            <p class="start-subtitle">Ready to begin your reading test?</p>
            <button class="start-button" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <!-- Test Container -->
    <div class="container hidden" id="testContainer">
        <header>
            <div class="passage-info">IELTSwithJurabek</div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span>20:00</span>
            </div>
            <div class="logo-area" onclick="window.open('https://t.me/IELTSwithJurabek', '_blank')">
                <i class="fas fa-paper-plane"></i>
                <span>Click for more TESTS</span>
            </div>
        </header>

        <button id="highlight-btn" type="button">Highlight</button>
        <button id="remove-highlight-btn" type="button">Remove Highlight</button>

        <div class="main-content">
            <!-- Reading Passage -->
            <div class="passage-container" role="region" aria-label="Reading Passage">
                <h2 class="section-title">READING PASSAGE 1</h2>
                <div class="passage-content" id="passage">
                    <h3>The history and production of chocolate</h3>

                    <h4>Early history in Central America</h4>
                    <p>The climate of tropical rain forests combines great quantities of rainfall with high year-round
                        temperatures and humidity. This results in the perfect conditions for the cultivation of the
                        cacao tree plant from whose bean chocolate is derived. This tree has grown in the wild in
                        Central America for about 10,000 years. The Olmec Indians, whose civilization flourished in what
                        is now southern Mexico from 1500 to 300 BC, are believed to have been the first to grow cocoa
                        beans as a domestic crop.</p>
                    <p>The cacao tree was worshipped from about 600 AD by the Mayan people of Central America and
                        southern Mexico, who believed it to be of divine origin. Cacao, which the early explorers
                        renamed as cocoa, is actually a Mayan word meaning 'god food'. The Mayans brewed a spicy,
                        bitter-sweet drink by pounding the cocoa beans with maize and chilli peppers and letting the
                        mixture ferment. This drink was reserved for use in traditional ceremonies as well as for
                        drinking by the wealthy and by priests, who also ate a porridge made from the beans.</p>
                    <p>In about 1200 AD the Aztecs of central Mexico were introduced to cocoa beans and came to highly
                        prize them, but because they lived further north at more arid, higher altitudes not suitable for
                        the cultivation of the cacao tree, they had to acquire the beans through trade or by force. The
                        Aztecs used cocoa beans as currency and taxes were paid in the beans to their rulers. In fact,
                        the Aztec royal treasury consisted not of precious metals but of cocoa beans. The Aztecs also
                        enjoyed a beverage made from the beans, and this again featured prominently in rituals and as a
                        luxury available only to the very wealthy. The Aztecs called this drink "xocolātl". The Spanish
                        explorers found this word almost impossible to pronounce and so corrupted it to "chocolat",
                        which the English subsequently changed to chocolate.</p>

                    <h4>Introduction to Europe and North America</h4>
                    <p>Chocolate was brought back to Spain in the early 16th century by Spanish explorers, who at first
                        found the Aztec drink distasteful because of its bitterness. However, they learned to improve
                        its taste by mixing the ground roasted beans with sugar and vanilla. Chocolate factories were
                        established in Spain and by the early 17th century, chocolate powder was being exported to other
                        parts of Europe. The Spanish kept the source of the drink — the beans — a secret for many years,
                        so successfully, in fact, that when English pirates boarded a Spanish ship they thought carried
                        great treasure and only found a load of cocoa beans, they burned the ship in frustration. If
                        only they had known that chocolate at that time was extremely valuable.</p>
                    <p>Within a few years, the cocoa beverage produced in Spain was sought after throughout Europe. The
                        first chocolate house in England opened in 1657, followed rapidly by many others. These
                        establishments were used as clubs where wealthy people could meet to talk to their friends and
                        to discuss business over a cup of chocolate. The first recorded instance of chocolate being
                        eaten in solid form occurred when a baker in England began adding cocoa powder to cakes in the
                        mid-1600s. Then in 1828, a Dutch chemist, Johannes Van Houten, invented a method of extracting
                        the bitter-tasting cocoa butter from the roasted beans. His aim was to make the cocoa drink
                        smoother and more palatable; however, unknowingly he paved the way for the chocolate bar that we
                        consume today.</p>
                    <p>In the early 18th century, certain companies owned by prominent English families including the
                        Frys, Rowntrees and Cadburys, began making chocolate. Many of these chocolate factory owners
                        were noted for their enlightened treatment of employees, providing not just jobs but facilities
                        such as housing and schools. In fact, the Cadbury company constructed a large purpose-built town
                        near Birmingham. And interestingly, Milton Hershey, founder of perhaps the most famous US
                        chocolate-making company of its day, also established a town in Pennsylvania in 1900.</p>

                    <h4>The production of chocolate</h4>
                    <p>Producing chocolate is a time-consuming and complicated process. After being harvested and
                        separated from the pods which contain them, the beans are allowed to ferment and then dried
                        either in the sun (which produces the best chocolate) or artificially, using specially designed
                        machines (which creates an inferior chocolate). After that, the beans are roasted according to
                        various formulas which affect the flavour of the final product.</p>
                    <p>The beans are then lightly crushed, the outer layer of shell discarded, and the internal kernel
                        or 'nib' retained. At this point, the nibs, which contain high quantities of a fat known as
                        cocoa butter, may be treated to develop their flavour and colour. The nibs are finely ground,
                        and in the grinding process heat is produced which liquefies the product into a substance called
                        the 'liquor'. This is cooled and allowed to solidify. After this stage, the chocolate is made
                        into any of a multitude of solid forms or is ground into cocoa powder, depending on the ultimate
                        intended use.</p>
                </div>
            </div>

            <div class="resizer" id="resizer"></div>

            <!-- Questions -->
            <div class="questions-container" id="questions" role="region" aria-label="Questions">
                <h2 class="section-title">Questions 1-13</h2>
                <p>You should spend about 20 minutes on Questions 1–13, which are based on Reading Passage 1.</p>

                <!-- Questions 1-5: True / False / Not Given -->
                <div class="question-section">
                    <div class="question-group">
                        <div class="question-group-title">Questions 1–5</div>
                        <p>Do the following statements agree with the information given in Reading Passage 1?<br>
                            In boxes 1–5 on your answer sheet, write:</p>
                        <p><strong>TRUE</strong> if the statement agrees with the information<br>
                            <strong>FALSE</strong> if the statement contradicts the information<br>
                            <strong>NOT GIVEN</strong> if there is no information on this
                        </p>

                        <div class="question" data-question="1">
                            <div class="question-text">1. A climate with seasonal variation in temperature is ideal for
                                growing the cacao tree.</div>
                            <div class="options">
                                <label class="option"><input type="radio" name="q1" value="TRUE"> TRUE</label>
                                <label class="option"><input type="radio" name="q1" value="FALSE"> FALSE</label>
                                <label class="option"><input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN</label>
                            </div>
                        </div>

                        <div class="question" data-question="2">
                            <div class="question-text">2. It is likely that the Olmec Indians were the first people to
                                cultivate the cacao trees.</div>
                            <div class="options">
                                <label class="option"><input type="radio" name="q2" value="TRUE"> TRUE</label>
                                <label class="option"><input type="radio" name="q2" value="FALSE"> FALSE</label>
                                <label class="option"><input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN</label>
                            </div>
                        </div>

                        <div class="question" data-question="3">
                            <div class="question-text">3. The location of the Aztec homeland meant that they had to
                                obtain cocoa beans from elsewhere.</div>
                            <div class="options">
                                <label class="option"><input type="radio" name="q3" value="TRUE"> TRUE</label>
                                <label class="option"><input type="radio" name="q3" value="FALSE"> FALSE</label>
                                <label class="option"><input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN</label>
                            </div>
                        </div>

                        <div class="question" data-question="4">
                            <div class="question-text">4. The Aztec rulers demanded heavy taxes from their subjects.
                            </div>
                            <div class="options">
                                <label class="option"><input type="radio" name="q4" value="TRUE"> TRUE</label>
                                <label class="option"><input type="radio" name="q4" value="FALSE"> FALSE</label>
                                <label class="option"><input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN</label>
                            </div>
                        </div>

                        <div class="question" data-question="5">
                            <div class="question-text">5. Drinks made from cocoa beans were widely consumed by ordinary
                                Aztecs.</div>
                            <div class="options">
                                <label class="option"><input type="radio" name="q5" value="TRUE"> TRUE</label>
                                <label class="option"><input type="radio" name="q5" value="FALSE"> FALSE</label>
                                <label class="option"><input type="radio" name="q5" value="NOT GIVEN"> NOT GIVEN</label>
                            </div>
                        </div>
                    </div>

                    <!-- Questions 6-10: Note Completion -->
                    <div class="question-group">
                        <div class="question-group-title">Questions 6–10</div>
                        <p>Complete the notes below.<br>
                            Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.<br>
                            Write your answers in boxes 6–10 on your answer sheet.</p>

                        <p><strong>The history of chocolate</strong><br>
                            <strong>Introduction to Europe and North America</strong><br>
                            • Spanish explorers introduced chocolate drink to Europe in 16th century<br>
                            • ingredients added to reduce <input type="text" name="q6" class="input-field"
                                maxlength="20"> <br>
                            • chocolate houses established in 17th century in England for social, <input type="text"
                                name="q7" class="input-field" maxlength="20"> and other activities<br>
                            <strong>Developments in the production of chocolate</strong><br>
                            • Englishman who was a <input type="text" name="q8" class="input-field" maxlength="20">
                            creates first known edible chocolate product in 1600s<br>
                            • Dutch scientist invents process leading to creation of the chocolate <input type="text"
                                name="q9" class="input-field" maxlength="20"><br>
                            • many English producers provide variety of facilities for <input type="text" name="q10"
                                class="input-field" maxlength="20"><br>
                            • Cadbury (in England) and Hershey (in America) each establish a town
                        </p>
                    </div>

                    <!-- Questions 11-13: Flow Chart -->
                    <div class="question-group">
                        <div class="question-group-title">Questions 11–13</div>
                        <p>Complete the flow chart below.<br>
                            Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.<br>
                            Write your answers in boxes 11–13 on your answer sheet.</p>

                        <p><strong>The chocolate manufacturing process</strong><br>
                            After being separated from their pods, cocoa beans are <input type="text" name="q11"
                                class="input-field" maxlength="20"> naturally or mechanically<br>
                            Beans then <input type="text" name="q12" class="input-field" maxlength="20"> to create
                            distinctive tastes<br>
                            Nibs are separated from the shells<br>
                            Heat generated during the grinding of the nibs produces <input type="text" name="q13"
                                class="input-field" maxlength="20"><br>
                            Further treatment produces desired final chocolate product</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress & Navigation -->
        <div class="progress-container">
            <div class="progress-nav">
                <div class="progress-items">
                    <div class="progress-item current" data-question="1">1</div>
                    <div class="progress-item" data-question="2">2</div>
                    <div class="progress-item" data-question="3">3</div>
                    <div class="progress-item" data-question="4">4</div>
                    <div class="progress-item" data-question="5">5</div>
                    <div class="progress-item" data-question="6">6</div>
                    <div class="progress-item" data-question="7">7</div>
                    <div class="progress-item" data-question="8">8</div>
                    <div class="progress-item" data-question="9">9</div>
                    <div class="progress-item" data-question="10">10</div>
                    <div class="progress-item" data-question="11">11</div>
                    <div class="progress-item" data-question="12">12</div>
                    <div class="progress-item" data-question="13">13</div>
                </div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prev-btn" disabled><i class="fas fa-arrow-left"></i>
                        Previous</button>
                    <button class="btn btn-secondary" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-submit" id="submit-btn">Submit Test <i
                            class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <h2>Test Results</h2>
            <div class="score-display" id="score-display">0/13</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <span>Passage 1:</span>
                    <span id="passage1-score">0/13</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="close-modal">Close</button>
                <button class="btn btn-primary" id="review-answers">Review Answers</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- Correct Answers Object ---
        const correctAnswers = {
            q1: 'FALSE',
            q2: 'TRUE',
            q3: 'TRUE',
            q4: 'NOT GIVEN',
            q5: 'FALSE',
            q6: 'bitterness',
            q7: 'business',
            q8: 'baker',
            q9: 'bar',
            q10: 'employees',
            q11: 'dried',
            q12: 'roasted',
            q13: 'liquor'
        };

        let lastSelection = null;
        let highlightTarget = null;
        let currentPanel = null;
        let submitted = false;
        let currentQuestion = 1;
        let isResizing = false;
        let seconds = 20 * 60;
        let timerInterval;

        const highlightBtn = document.getElementById('highlight-btn');
        const removeHighlightBtn = document.getElementById('remove-highlight-btn');
        const passagePanel = document.getElementById('passage');
        const questionsPanel = document.getElementById('questions');
        const resizer = document.getElementById('resizer');
        const submitBtn = document.getElementById('submit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsModal = document.getElementById('results-modal');
        const scoreDisplay = document.getElementById('score-display');
        const passage1Score = document.getElementById('passage1-score');
        const closeModalBtn = document.getElementById('close-modal');
        const reviewBtn = document.getElementById('review-answers');
        const timerElement = document.querySelector('.timer span');
        const timerContainer = document.querySelector('.timer');

        // Highlight functionality
        function getValidSelection() {
            const sel = window.getSelection();
            if (!sel.rangeCount || sel.isCollapsed) return null;
            const range = sel.getRangeAt(0);
            if (passagePanel.contains(range.commonAncestorContainer)) {
                currentPanel = passagePanel;
            } else if (questionsPanel.contains(range.commonAncestorContainer)) {
                currentPanel = questionsPanel;
            } else {
                return null;
            }
            return range;
        }

        function showHighlightBtn(range) {
            const rect = range.getBoundingClientRect();
            highlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            highlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            highlightBtn.style.display = 'block';
        }

        function hideHighlightBtn() {
            highlightBtn.style.display = 'none';
        }

        function showRemoveBtn(span) {
            const rect = span.getBoundingClientRect();
            removeHighlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            removeHighlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            removeHighlightBtn.style.display = 'block';
            highlightTarget = span;
        }

        function hideRemoveBtn() {
            removeHighlightBtn.style.display = 'none';
            highlightTarget = null;
        }

        highlightBtn.addEventListener('click', () => {
            if (lastSelection) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(lastSelection.extractContents());
                lastSelection.insertNode(span);
                window.getSelection().removeAllRanges();
                hideHighlightBtn();
            }
        });

        removeHighlightBtn.addEventListener('click', () => {
            if (highlightTarget) {
                const parent = highlightTarget.parentNode;
                while (highlightTarget.firstChild) {
                    parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                }
                parent.removeChild(highlightTarget);
                hideRemoveBtn();
            }
        });

        document.addEventListener('selectionchange', () => {
            hideHighlightBtn();
            hideRemoveBtn();
            const range = getValidSelection();
            if (range) {
                lastSelection = range;
                showHighlightBtn(range);
            } else {
                lastSelection = null;
            }
        });

        [passagePanel, questionsPanel].forEach(panel => {
            panel.addEventListener('scroll', () => {
                hideHighlightBtn();
                hideRemoveBtn();
            });
        });

        document.addEventListener('mousedown', (e) => {
            if (e.target !== highlightBtn && e.target !== removeHighlightBtn) {
                hideHighlightBtn();
                hideRemoveBtn();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('highlight')) {
                e.preventDefault();
                showRemoveBtn(e.target);
            }
        });

        // Resizer
        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const container = document.querySelector('.main-content');
            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const containerWidth = containerRect.width;
            const leftPercentage = (mouseX / containerWidth) * 100;
            const rightPercentage = 100 - leftPercentage;
            if (leftPercentage >= 30 && leftPercentage <= 70) {
                document.querySelector('.passage-container').style.flex = leftPercentage + '%';
                document.querySelector('.questions-container').style.width = rightPercentage + '%';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });

        // Navigation
        function scrollToQuestion(num) {
            const el = document.querySelector(`[data-question="${num}"]`);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            updateCurrentQuestion(num);
        }

        function updateCurrentQuestion(num) {
            currentQuestion = num;
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('current');
                if (item.dataset.question == num) item.classList.add('current');
            });
            prevBtn.disabled = num <= 1;
            nextBtn.disabled = num >= 13;
        }

        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                scrollToQuestion(parseInt(item.dataset.question));
            });
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 1) scrollToQuestion(currentQuestion - 1);
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < 13) scrollToQuestion(currentQuestion + 1);
        });

        // Update progress for inputs
        document.querySelectorAll('input[type="radio"], input[type="text"]').forEach(input => {
            input.addEventListener('change', () => {
                if (submitted) return;
                const qNumMatch = input.name.match(/^q(\d+)$/);
                if (qNumMatch) {
                    const qNum = parseInt(qNumMatch[1]);
                    const item = document.querySelector(`.progress-item[data-question="${qNum}"]`);
                    if (item && !item.classList.contains('answered')) {
                        item.classList.add('answered');
                    }
                }
            });
        });

        // Submit Test
        submitBtn.addEventListener('click', submitTest);

        function submitTest() {
            if (submitted) return;
            if (!confirm('Are you sure you want to submit?')) return;
            submitted = true;
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submitted';

            let score = 0;
            const results = {};

            // Scoring: Questions 1–5 (True/False/Not Given)
            for (let i = 1; i <= 5; i++) {
                const key = `q${i}`;
                const selected = document.querySelector(`input[name="${key}"]:checked`);
                const userAnswer = selected ? selected.value : '';
                const isCorrect = userAnswer === correctAnswers[key];
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Scoring: Questions 6–10 (One Word Only)
            for (let i = 6; i <= 10; i++) {
                const key = `q${i}`;
                const inputEl = document.querySelector(`input[name="${key}"]`);
                const userAnswer = inputEl ? inputEl.value.trim().toLowerCase() : '';
                const correctAnswer = correctAnswers[key].toLowerCase();
                const isCorrect = userAnswer === correctAnswer;
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Scoring: Questions 11–13 (Flow Chart)
            for (let i = 11; i <= 13; i++) {
                const key = `q${i}`;
                const inputEl = document.querySelector(`input[name="${key}"]`);
                const userAnswer = inputEl ? inputEl.value.trim().toLowerCase() : '';
                const correctAnswer = correctAnswers[key].toLowerCase();
                const isCorrect = userAnswer === correctAnswer;
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Update score display
            scoreDisplay.textContent = `${score}/13`;
            passage1Score.textContent = `${score}/13`;

            // Update progress indicators
            for (let i = 1; i <= 13; i++) {
                const item = document.querySelector(`.progress-item[data-question="${i}"]`);
                const res = results[`q${i}`];
                if (item && res) {
                    item.classList.remove('current', 'answered');
                    if (res.isCorrect) {
                        item.classList.add('correct');
                    } else {
                        item.classList.add('incorrect');
                    }
                }
            }

            window.testResults = results;
            resultsModal.style.display = 'flex';
        }

        // Review Answers
        function showCorrectAnswers() {
            if (!submitted) {
                console.warn("Test not submitted yet.");
                return;
            }

            Object.entries(testResults).forEach(([questionKey, result]) => {
                const questionNum = questionKey.replace('q', '');
                let questionDiv = document.querySelector(`.div.question[data-question="${questionNum}"]`);

                if (!questionDiv) {
                    // Try to find input for text fields (q6–q13)
                    const input = document.querySelector(`input[name="${questionKey}"]`);
                    if (input) {
                        // Avoid showing multiple times
                        if (input.nextElementSibling && input.nextElementSibling.classList.contains('correct-answer')) return;

                        const correctAnswerDiv = document.createElement("div");
                        correctAnswerDiv.className = "correct-answer";
                        correctAnswerDiv.style.marginTop = "6px";
                        correctAnswerDiv.style.fontStyle = "italic";
                        correctAnswerDiv.style.color = "#2a7f62";
                        correctAnswerDiv.textContent = `Correct Answer: ${result.correct}`;

                        input.parentNode.insertBefore(correctAnswerDiv, input.nextSibling);
                    }
                } else {
                    // Avoid showing multiple times
                    if (questionDiv.querySelector('.correct-answer')) return;

                    const correctAnswerDiv = document.createElement("div");
                    correctAnswerDiv.className = "correct-answer";
                    correctAnswerDiv.style.marginTop = "6px";
                    correctAnswerDiv.style.fontStyle = "italic";
                    correctAnswerDiv.style.color = "#2a7f62";
                    correctAnswerDiv.textContent = `Correct Answer: ${result.correct}`;

                    questionDiv.appendChild(correctAnswerDiv);
                }
            });
        }




        closeModalBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
        });

        reviewBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
            showCorrectAnswers();
            scrollToQuestion(1);
        });

        // Start Test & Timer
        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testContainer').classList.remove('hidden');
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            seconds--;
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 2 * 60) {
                timerContainer.classList.add('warning');
            }
            if (seconds <= 0) {
                clearInterval(timerInterval);
                if (!submitted) {
                    alert('Time is up! Submitting your test.');
                    submitTest();
                }
            }
        }

        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }, 2000);
    </script>
</body>

</html>