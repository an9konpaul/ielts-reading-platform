<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }

        .loading-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9999;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-title {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #9ca3af;
        }

        .start-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9998;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        .start-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .start-button {
            padding: 12px 32px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .start-button:hover {
            background-color: #1d4ed8;
        }

        .hidden {
            display: none !important;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        header {
            background-color: #ffffff;
            color: #333;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .passage-info {
            font-size: 0.9rem;
            font-weight: 500;
            color: #2d3748;
        }

        .timer {
            background-color: rgba(255, 193, 193, 0.5);
            padding: 6px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            min-width: 80px;
            text-align: center;
            font-size: 0.9rem;
            color: #c53030;
            border: 1px solid rgba(255, 120, 120, 0.3);
        }

        .timer.warning {
            color: #9b2c2c;
            background-color: rgba(254, 178, 178, 0.7);
            border-color: rgba(245, 101, 101, 0.5);
        }

        .logo-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            cursor: pointer;
        }

        .logo-area:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }

        .logo-area i {
            font-size: 1.1rem;
        }

        .progress-container {
            background-color: #f8f9fa;
            padding: 4px 20px;
            z-index: 100;
            flex-shrink: 0;
            border-top: 1px solid #e2e8f0;
        }

        .progress-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .progress-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .progress-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            border: 1px solid #cbd5e0;
        }

        .progress-item.current {
            background-color: #4299e1;
            color: white;
            transform: scale(1.1);
            border-color: #2b6cb0;
        }

        .progress-item.answered {
            background-color: #9ae6b4;
            color: #22543d;
            border-color: #68d391;
        }

        .progress-item.correct {
            background-color: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .progress-item.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border-color: #feb2b2;
        }

        .progress-item:hover {
            background-color: #cbd5e0;
            transform: scale(1.05);
        }

        .btn {
            padding: 6px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
            background-color: #f7fafc;
            color: #4a5568;
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-primary,
        .btn-secondary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-primary:hover,
        .btn-secondary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-submit {
            background-color: #48bb78;
            color: white;
            font-weight: 900;
            border: 1px solid #38a169;
        }

        .btn-submit:hover {
            background-color: #38a169;
            border-color: #2f855a;
        }

        .btn-submit:disabled {
            background-color: #9ae6b4;
            color: #718096;
            cursor: not-allowed;
            border: 1px solid #68d391;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fafafa;
            position: relative;
        }

        .resizer {
            width: 4px;
            background-color: #cbd5e0;
            cursor: col-resize;
            position: relative;
            transition: background-color 0.2s;
        }

        .resizer:hover {
            background-color: #a0aec0;
        }

        .resizer::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 60px;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: 4px;
            pointer-events: none;
        }

        .questions-container {
            width: 40%;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border-left: 1px solid #e2e8f0;
        }

        .passage {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage-content p {
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question-group {
            max-width: 800px;
            margin: 0 auto 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .question-group-title {
            font-size: 1.05rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
        }

        .question {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background-color: #ffffff;
        }

        .question:last-child {
            margin-bottom: 0;
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .option:hover {
            background-color: #f7fafc;
            border-color: #cbd5e0;
        }

        .option input {
            margin-right: 6px;
            width: 16px;
            height: 16px;
        }

        .input-field,
        select.input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 100%;
            max-width: 220px;
            margin-top: 5px;
            font-size: 0.95rem;
        }

        .input-field:focus,
        select.input-field:focus {
            border-color: #4299e1;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.2);
        }

        .answer-indicator {
            background-color: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .answer-indicator.correct {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .answer-indicator.incorrect {
            background-color: #fed7d7;
            border-color: #fc8181;
            color: #742a2a;
        }

        .highlight {
            background-color: #ffff00;
            cursor: pointer;
        }

        #highlight-btn,
        #remove-highlight-btn {
            position: absolute;
            z-index: 9999;
            display: none;
            padding: 6px 12px;
            font-size: 14px;
            border: 1px solid #888;
            border-radius: 4px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .option-list {
            margin: 10px 0 20px 18px;
        }

        .option-list li {
            margin-bottom: 6px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .score-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2d3748;
        }

        .score-breakdown {
            margin: 20px 0;
            text-align: left;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .questions-container {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .resizer {
                width: 100%;
                height: 4px;
                cursor: row-resize;
            }

            .resizer::before {
                width: 60px;
                height: 30px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }

            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .logo-area {
                order: 1;
            }

            .passage-info {
                order: 2;
            }

            .timer {
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 class="loading-title">Your test will begin shortly</h2>
            <p class="loading-subtitle">Please wait</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen hidden">
        <div class="start-content">
            <h1 class="start-title">IELTSwithJurabek</h1>
            <p class="start-subtitle">Ready to begin your reading test?</p>
            <button class="start-button" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <!-- Test Container -->
    <div class="container hidden" id="testContainer">
        <header>
            <div class="passage-info">IELTSwithJurabek</div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span>20:00</span>
            </div>
            <div class="logo-area" onclick="window.open('https://t.me/IELTSwithJurabek', '_blank')">
                <i class="fas fa-paper-plane"></i>
                <span>Click for more TESTS</span>
            </div>
            <div class="passage-info">Passage 2 of 3</div>
        </header>

        <button id="highlight-btn" type="button">Highlight</button>
        <button id="remove-highlight-btn" type="button">Remove Highlight</button>

        <div class="main-content">
            <!-- Reading Passage -->
            <div class="passage-container" role="region" aria-label="Reading Passage">
                <h2 class="section-title">READING PASSAGE 2</h2>
                <div class="passage-content" id="passage2">
                    <h3>Understanding and Protecting Elephants</h3>
                    <p><strong>A</strong> The future of the African elephant is at risk. They are often shot by poachers for their ivory and this is responsible for most of the decline in elephant numbers. But habitat loss is important too, and not just the changing of bush into farmland. Roads, railways and fences stop elephants moving around, and an elephant needs a lot of room. According to George Wittemyer of Save the Elephants, an average elephant ranges over 1,500 square kilometres over a year and may travel as much as 60 kilometres a day.</p>
                    <p><strong>B</strong> The question is whether elephants and people can ever coexist peacefully. People who worry that the answer may be 'no' fear the loss of more than just another species of animal. Elephants seem to have evolved intelligence, and possibly even consciousness. Though they may not be alone in this (similar claims are made for certain whales, some carnivores like lions and hyenas, and some birds), they are certainly part of a small group. Self-awareness is one indication of the vast capacity for thinking and intellect that exists in the elephant. They can, in fact, identify themselves in a mirror, something that is extremely rare in the animal kingdom. Another example of superior intellect is the elephant's ability to have fun and display a sense of humour. Elephants in zoos have even been seen stealing onlookers' caps and hiding them in playful teasing. Losing even one example of how intelligence develops would reduce the ability of biologists to understand the process of how intelligence has evolved in animals.</p>
                    <p><strong>C</strong> Apart from people, no species on Earth has a more complex society than elephants. Their social arrangements centre around groups of four or five females and their young that are led by a matriarch who is mother, grandmother, great-grandmother, sister or aunt to most of them. Though males are forced to depart their birth group when they mature, females usually remain in it their entire lives. Elephant families are part of bigger 'kinship' groups that come together and separate at will. Moreover, each kinship group is part of what is called a clan. Clans gather in the dry season, when the resources capable of supporting elephants are limited. All clan members know each other and, since a clan will usually have 100 to 200 adult members, this means an adult female can recognise and have meaningful social relations with that many other individuals. A figure of between 100 and 200 acquaintances is similar to the number of people a human being can maintain meaningful social relationships with - a value known as Dunbar's number. Dunbar's number for people is about 150.</p>
                    <p><strong>D</strong> Being able to recall details of such large numbers of individuals means elephants require enormous mental powers. Details of how their brains work are not known, but one thing which is known is that they have big hippocampuses. These structures, one in each hemisphere of the brain, are involved in the formation of long-term recall. Compared with the size of its brain, an elephant's hippocampuses are about 40 per cent larger than those of a human being.</p>
                    <p><strong>E</strong> Elephants can seemingly solve problems by thinking about them in abstract terms. Experiments conducted on domesticated Asian elephants show that they are able to manipulate nearby objects, such as branches, as tools to get food which is out of reach. This is something some other species, such as great apes, can do, but which most animals find impossible. For all of these reasons then, elephants are of great scientific interest. But the focus of almost all elephant researchers has shifted from understanding the animals to trying to preserve them.</p>
                    <p><strong>F</strong> Another, though secondary, cause of elephant decline, is changes in land use in Africa. The human inhabitants of areas around African elephant reserves have traditionally survived by moving herds of cattle from one grazing place to another. One source of conflict with elephants has been competition for pasture, as the herders' populations have grown. But, additionally, some herders have begun to settle down. Buildings and fences are appearing on land which elephants have traditionally crossed as they travel from one place to another. Elephants have places where they prefer to live and, when travelling between these, which they often do at night, they tend to follow narrow corridors. Keeping these corridors clear of development is essential to the well-being of elephants.</p>
                    <p><strong>G</strong> Understanding elephants' behavior also permits it to be changed in ways that help reduce direct conflict between elephants and people. One such project uses elephants' fear of bees. Bees are the only animals, apart from humans, that elephants seem truly afraid of. This is because, although a bee's sting cannot penetrate most parts of an elephant's hide, groups of bees tend to attack the eyes and the tips of the trunks, an elephant's most sensitive parts. Elephants can't protect themselves from the bees—not even by swinging their tails and flapping their ears.</p>
                    <p><strong>H</strong> Knowing this, scientists developed the idea of protecting farms with bee fences. The sort of fence most African farmers can afford is too weak to keep an elephant away from their crops, but a bee fence, though even weaker, will achieve this. The fence consists of pairs of poles placed at three-metre intervals, between which beehives are hung. This fence is enough to stop elephants immediately. They are so scared that half the hives can be fake, and the fence still keeps the elephants out. Bee-fenced farms suffer far fewer elephant attacks than those with conventional protection. As a bonus, the farmers earn extra income from the honey the bees produce.</p>
                </div>
            </div>

            <div class="resizer" id="resizer"></div>

            <!-- Questions -->
            <div class="questions-container" id="questions" role="region" aria-label="Questions">
                <h2 class="section-title">Questions 14–29</h2>
                <p>You should spend about 20 minutes on Questions 14–29, which are based on Reading Passage 2.</p>

                <div class="question-group">
                    <div class="question-group-title">Questions 14–20</div>
                    <p>Reading Passage 2 has eight paragraphs, A–H. Which paragraph contains the following information? Write the correct letter, A–H. You may use any letter more than once.</p>

                    <div class="question" data-question="14">
                        <div class="question-text">14. an explanation of why elephants have such good memories</div>
                        <select class="input-field" name="q14">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="15">
                        <div class="question-text">15. a mention of the possible consequence of elephant extinction on scientific knowledge</div>
                        <select class="input-field" name="q15">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="16">
                        <div class="question-text">16. a comparison of human and elephant abilities to interact with others</div>
                        <select class="input-field" name="q16">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="17">
                        <div class="question-text">17. a detail about when elephants most frequently move between different areas</div>
                        <select class="input-field" name="q17">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="18">
                        <div class="question-text">18. reference to the biggest cause of the decrease in the world’s elephant population</div>
                        <select class="input-field" name="q18">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="19">
                        <div class="question-text">19. a mention of the fact that climate affects the time when elephants group together</div>
                        <select class="input-field" name="q19">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="question" data-question="20">
                        <div class="question-text">20. reference to how some elephants can use items in their environment to feed themselves</div>
                        <select class="input-field" name="q20">
                            <option value="" disabled selected>Select paragraph</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 21–22</div>
                    <p>Choose <strong>TWO</strong> letters, A–E. Which <strong>TWO</strong> examples of elephant intelligence are mentioned by the writer of the text?</p>
                    <div class="question" data-question="21" data-question-group="21 22">
                        <div class="question-text">Questions 21 and 22</div>
                        <p>Select up to two letters.</p>
                        <div class="options">
                            <label><input type="checkbox" name="q21" value="A"> A. Elephants can identify potentially dangerous foods.</label>
                            <label><input type="checkbox" name="q21" value="B"> B. Elephants are capable of learning new skills throughout their lives.</label>
                            <label><input type="checkbox" name="q21" value="C"> C. Elephants are able to share a habitat with other animal species.</label>
                            <label><input type="checkbox" name="q21" value="D"> D. Elephants have the ability to recognise their own reflection.</label>
                            <label><input type="checkbox" name="q21" value="E"> E. Elephants demonstrate a capacity for playful behaviour.</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 23–24</div>
                    <p>Choose <strong>TWO</strong> letters, A–E. Which <strong>TWO</strong> of the following statements are true of land use in Africa according to the writer of the text?</p>
                    <div class="question" data-question="23">
                        <div class="question-text">23.</div>
                        <div class="options">
                            <label><input type="radio" name="q23" value="A"> A. Rising global temperatures are affecting animals more than humans.</label>
                            <label><input type="radio" name="q23" value="B"> B. Herders have begun to change the way they graze their cattle.</label>
                            <label><input type="radio" name="q23" value="C"> C. Elephants are easily capable of adapting to new grazing areas.</label>
                            <label><input type="radio" name="q23" value="D"> D. Man-made structures are preventing the free movement of elephants.</label>
                            <label><input type="radio" name="q23" value="E"> E. Elephants consume considerably more grass than cattle do.</label>
                        </div>
                    </div>
                    <div class="question" data-question="24">
                        <div class="question-text">24.</div>
                        <div class="options">
                            <label><input type="radio" name="q24" value="A"> A. Rising global temperatures are affecting animals more than humans.</label>
                            <label><input type="radio" name="q24" value="B"> B. Herders have begun to change the way they graze their cattle.</label>
                            <label><input type="radio" name="q24" value="C"> C. Elephants are easily capable of adapting to new grazing areas.</label>
                            <label><input type="radio" name="q24" value="D"> D. Man-made structures are preventing the free movement of elephants.</label>
                            <label><input type="radio" name="q24" value="E"> E. Elephants consume considerably more grass than cattle do.</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 25–29</div>
                    <p>Complete the summary below. Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.</p>
                    <p><strong>Elephants and Bees</strong><br>
                        Even though most of an elephant's skin is too thick for a bee to sting through, elephants fear bees greatly. This is because the insects sting elephants in their eyes or on their <input type="text" class="input-field" name="q25" placeholder="25">, which are easily hurt.<br><br>
                        Farmers in Africa use bee fences to stop elephants from coming on to their property and damaging <input type="text" class="input-field" name="q26" placeholder="26">. These bee fences are simple constructions of regularly spaced <input type="text" class="input-field" name="q27" placeholder="27"> from which hives are hung. The elephants are so scared of bees that even using some beehives which are <input type="text" class="input-field" name="q28" placeholder="28"> will frighten elephants away.<br><br>
                        The honey collected from these beehives can also provide additional <input type="text" class="input-field" name="q29" placeholder="29"> for farmers.
                    </p>
                </div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-nav">
                <div class="progress-items">
                    <div class="progress-item current" data-question="14">14</div>
                    <div class="progress-item" data-question="15">15</div>
                    <div class="progress-item" data-question="16">16</div>
                    <div class="progress-item" data-question="17">17</div>
                    <div class="progress-item" data-question="18">18</div>
                    <div class="progress-item" data-question="19">19</div>
                    <div class="progress-item" data-question="20">20</div>
                    <div class="progress-item" data-question="21">21</div>
                    <div class="progress-item" data-question="22">22</div>
                    <div class="progress-item" data-question="23">23</div>
                    <div class="progress-item" data-question="24">24</div>
                    <div class="progress-item" data-question="25">25</div>
                    <div class="progress-item" data-question="26">26</div>
                    <div class="progress-item" data-question="27">27</div>
                    <div class="progress-item" data-question="28">28</div>
                    <div class="progress-item" data-question="29">29</div>
                </div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prev-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                    <button class="btn btn-secondary" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-submit" id="submit-btn">Submit Test <i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <h2>Test Results</h2>
            <div class="score-display" id="score-display">0/16</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <span>Passage 2:</span>
                    <span id="passage2-score">0/16</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="close-modal">Close</button>
                <button class="btn btn-primary" id="review-answers">Review Answers</button>
            </div>
        </div>
    </div>

    <script>
        const QUESTION_START = 14;
        const QUESTION_END = 29;

        const correctAnswers = {
            q14: "D",
            q15: "B",
            q16: "C",
            q17: "F",
            q18: "A",
            q19: "C",
            q20: "E",
            q21: ["D", "E"],
            q22: ["D", "E"],
            q23: ["B", "D"],
            q24: ["B", "D"],
            q25: "trunks",
            q26: "crops",
            q27: "poles",
            q28: "fake",
            q29: "income"
        };

        const multiGroupMap = {
            "21": "21-22",
            "22": "21-22",
            "23": "23-24",
            "24": "23-24"
        };

        const multiSelectGroups = {
            "21-22": ["d", "e"],
            "23-24": ["b", "d"]
        };

        const questionInputAlias = {
            "22": "21"
        };

        const multiQuestionProgressMap = {
            "21": [
                { question: "21", threshold: 1 },
                { question: "22", threshold: 2 }
            ]
        };

        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        document.addEventListener('keydown', function (e) {
            if (e.keyCode === 123 ||
                (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
                (e.ctrlKey && e.keyCode === 85)) {
                e.preventDefault();
            }
        });

        let lastSelection = null;
        let highlightTarget = null;
        let submitted = false;
        let currentQuestion = QUESTION_START;
        let isResizing = false;
        let seconds = 20 * 60;
        let timerInterval;

        const highlightBtn = document.getElementById('highlight-btn');
        const removeHighlightBtn = document.getElementById('remove-highlight-btn');
        const passagePanel = document.querySelector('.passage-container');
        const questionsPanel = document.getElementById('questions');
        const resizer = document.getElementById('resizer');
        const submitBtn = document.getElementById('submit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsModal = document.getElementById('results-modal');
        const scoreDisplay = document.getElementById('score-display');
        const passageScore = document.getElementById('passage2-score');
        const closeModalBtn = document.getElementById('close-modal');
        const reviewBtn = document.getElementById('review-answers');
        const timerElement = document.querySelector('.timer span');
        const timerContainer = document.querySelector('.timer');

        function updateTimer() {
            seconds--;
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 120) timerContainer.classList.add('warning');
            if (seconds <= 0) {
                clearInterval(timerInterval);
                if (!submitted) {
                    alert('Time is up! Submitting your test.');
                    submitTest();
                }
            }
        }

        function getValidSelection() {
            const sel = window.getSelection();
            if (!sel.rangeCount || sel.isCollapsed) return null;
            const range = sel.getRangeAt(0);
            if (passagePanel.contains(range.commonAncestorContainer) ||
                questionsPanel.contains(range.commonAncestorContainer)) {
                return range;
            }
            return null;
        }

        function showHighlightBtn(range) {
            const rect = range.getBoundingClientRect();
            highlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            highlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            highlightBtn.style.display = 'block';
        }

        function hideHighlightBtn() {
            highlightBtn.style.display = 'none';
        }

        function showRemoveBtn(span) {
            const rect = span.getBoundingClientRect();
            removeHighlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            removeHighlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            removeHighlightBtn.style.display = 'block';
            highlightTarget = span;
        }

        function hideRemoveBtn() {
            removeHighlightBtn.style.display = 'none';
            highlightTarget = null;
        }

        highlightBtn.addEventListener('click', () => {
            if (lastSelection) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(lastSelection.extractContents());
                lastSelection.insertNode(span);
                window.getSelection().removeAllRanges();
                hideHighlightBtn();
            }
        });

        removeHighlightBtn.addEventListener('click', () => {
            if (highlightTarget) {
                const parent = highlightTarget.parentNode;
                while (highlightTarget.firstChild) {
                    parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                }
                parent.removeChild(highlightTarget);
                hideRemoveBtn();
            }
        });

        document.addEventListener('selectionchange', () => {
            hideHighlightBtn();
            hideRemoveBtn();
            const range = getValidSelection();
            if (range) {
                lastSelection = range;
                showHighlightBtn(range);
            } else {
                lastSelection = null;
            }
        });

        [passagePanel, questionsPanel].forEach(panel => {
            panel.addEventListener('scroll', () => {
                hideHighlightBtn();
                hideRemoveBtn();
            });
        });

        document.addEventListener('mousedown', (e) => {
            if (e.target !== highlightBtn && e.target !== removeHighlightBtn) {
                hideHighlightBtn();
                hideRemoveBtn();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('highlight')) {
                e.preventDefault();
                showRemoveBtn(e.target);
            }
        });

        resizer.addEventListener('mousedown', () => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const container = document.querySelector('.main-content');
            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const containerWidth = containerRect.width;
            const leftPercentage = (mouseX / containerWidth) * 100;
            if (leftPercentage >= 30 && leftPercentage <= 70) {
                document.querySelector('.passage-container').style.flex = leftPercentage + '%';
                document.querySelector('.questions-container').style.width = (100 - leftPercentage) + '%';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });

        function findQuestionElement(num) {
            return document.querySelector(`[data-question="${num}"]`) ||
                document.querySelector(`[data-question-group~="${num}"]`);
        }

        function scrollToQuestion(num) {
            const el = findQuestionElement(num);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            updateCurrentQuestion(num);
        }

        function updateCurrentQuestion(num) {
            currentQuestion = num;
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('current');
                if (item.dataset.question == num) item.classList.add('current');
            });
            prevBtn.disabled = num <= QUESTION_START;
            nextBtn.disabled = num >= QUESTION_END;
        }

        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => scrollToQuestion(parseInt(item.dataset.question)));
        });

        prevBtn.addEventListener('click', () => { if (currentQuestion > QUESTION_START) scrollToQuestion(currentQuestion - 1); });
        nextBtn.addEventListener('click', () => { if (currentQuestion < QUESTION_END) scrollToQuestion(currentQuestion + 1); });

        document.querySelectorAll('select, input[type="radio"], input[type="checkbox"], input[type="text"]').forEach(input => {
            const handler = () => {
                if (submitted) return;
                const match = input.name.match(/^q(\d+)$/i);
                if (!match) return;
                const qNum = match[1];
                const effectiveKey = questionInputAlias[qNum] || qNum;

                if (input.type === 'checkbox') {
                    updateSharedProgress(effectiveKey);
                } else {
                    const item = document.querySelector(`.progress-item[data-question="${qNum}"]`);
                    if (item) {
                        const hasValue = input.type === 'text' ? input.value.trim() !== '' : Boolean(input.value);
                        if (hasValue) item.classList.add('answered');
                        else item.classList.remove('answered');
                    }
                }

                if (effectiveKey !== qNum) {
                    updateSharedProgress(effectiveKey);
                }
            };
            input.addEventListener('change', handler);
            if (input.type === 'text') {
                input.addEventListener('input', handler);
            }
        });

        function updateSharedProgress(baseKey) {
            const config = multiQuestionProgressMap[baseKey];
            if (!config) return;
            const selectedCount = document.querySelectorAll(`input[name="q${baseKey}"]:checked`).length;
            config.forEach(({ question, threshold }) => {
                const item = document.querySelector(`.progress-item[data-question="${question}"]`);
                if (!item) return;
                if (selectedCount >= threshold) {
                    item.classList.add('answered');
                } else {
                    item.classList.remove('answered');
                }
            });
        }

        submitBtn.addEventListener('click', submitTest);

        function normalizeAnswerValue(value) {
            return String(value || '').trim().toLowerCase();
        }

        function getEffectiveInputName(name) {
            const match = name.match(/^q(\d+)$/i);
            if (match && questionInputAlias[match[1]]) {
                return `q${questionInputAlias[match[1]]}`;
            }
            return name;
        }

        function collectUserResponse(key) {
            const effectiveKey = getEffectiveInputName(key);
            const radioInputs = document.querySelectorAll(`input[name="${effectiveKey}"][type="radio"]`);
            if (radioInputs.length) {
                const checked = Array.from(radioInputs).find(input => input.checked);
                return {
                    isAnswered: Boolean(checked),
                    value: checked ? checked.value : '',
                    display: checked ? checked.value : ''
                };
            }

            const checkboxInputs = document.querySelectorAll(`input[name="${effectiveKey}"][type="checkbox"]`);
            if (checkboxInputs.length) {
                const checkedValues = Array.from(checkboxInputs)
                    .filter(input => input.checked)
                    .map(input => input.value);
                return {
                    isAnswered: checkedValues.length > 0,
                    value: checkedValues,
                    display: checkedValues.join(', ')
                };
            }

            const select = document.querySelector(`select[name="${effectiveKey}"]`);
            if (select) {
                return {
                    isAnswered: select.value !== '',
                    value: select.value,
                    display: select.value
                };
            }

            const textInput = document.querySelector(`input[name="${effectiveKey}"]`);
            if (textInput) {
                const value = textInput.value.trim();
                return {
                    isAnswered: value !== '',
                    value,
                    display: value
                };
            }

            return { isAnswered: false, value: '', display: '' };
        }

        function answersMatch(questionNumber, userResponse, correctAnswer, tracker) {
            if (!userResponse.isAnswered) return false;
            const normalizedQuestion = String(questionNumber);
            const groupKey = multiGroupMap[normalizedQuestion];

            if (groupKey && multiSelectGroups[groupKey]) {
                tracker[groupKey] = tracker[groupKey] || [];
                const selections = Array.isArray(userResponse.value) ? userResponse.value : [userResponse.value];
                const normalizedSelections = selections.map(normalizeAnswerValue).filter(Boolean);
                const available = normalizedSelections.find(sel =>
                    multiSelectGroups[groupKey].includes(sel) &&
                    !tracker[groupKey].includes(sel)
                );
                if (available) {
                    tracker[groupKey].push(available);
                    return true;
                }
                return false;
            }

            if (Array.isArray(correctAnswer)) {
                const normalizedUser = normalizeAnswerValue(userResponse.value);
                return correctAnswer.some(ans => normalizeAnswerValue(ans) === normalizedUser);
            }

            const normalizedCorrect = normalizeAnswerValue(correctAnswer);
            return normalizeAnswerValue(userResponse.value) === normalizedCorrect;
        }

        function disableInputsForQuestion(key) {
            const effectiveKey = getEffectiveInputName(key);
            document.querySelectorAll(`input[name="${effectiveKey}"]`).forEach(el => el.disabled = true);
            const select = document.querySelector(`select[name="${effectiveKey}"]`);
            if (select) select.disabled = true;
        }

        function formatCorrectAnswer(answer) {
            if (Array.isArray(answer)) {
                return answer.join(' / ');
            }
            return String(answer);
        }

        function submitTest() {
            if (submitted || !confirm('Are you sure you want to submit?')) return;
            submitted = true;
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submitted';

            let score = 0;
            const results = {};
            const multiTracker = {};

            for (let i = QUESTION_START; i <= QUESTION_END; i++) {
                const key = `q${i}`;
                const userResponse = collectUserResponse(key);
                const isCorrect = answersMatch(String(i), userResponse, correctAnswers[key], multiTracker);
                if (isCorrect) score++;
                results[key] = { userAnswer: userResponse.display, correct: correctAnswers[key], isCorrect };
                disableInputsForQuestion(key);
            }

            scoreDisplay.textContent = `${score}/${QUESTION_END - QUESTION_START + 1}`;
            passageScore.textContent = `${score}/${QUESTION_END - QUESTION_START + 1}`;

            for (let i = QUESTION_START; i <= QUESTION_END; i++) {
                const item = document.querySelector(`.progress-item[data-question="${i}"]`);
                if (item && results[`q${i}`]) {
                    item.classList.remove('current', 'answered');
                    item.classList.add(results[`q${i}`].isCorrect ? 'correct' : 'incorrect');
                }
            }

            window.testResults = results;
            resultsModal.style.display = 'flex';
        }

        function showCorrectAnswers() {
            if (!submitted) return;
            document.querySelectorAll('.answer-indicator').forEach(el => el.remove());

            for (let i = QUESTION_START; i <= QUESTION_END; i++) {
                const res = window.testResults[`q${i}`];
                if (!res) continue;
                const questionElement = findQuestionElement(i);
                if (!questionElement) continue;

                let target = questionElement.querySelector('.options');
                if (!target) target = questionElement.querySelector('.question-text');
                if (!target) target = questionElement;

                const div = document.createElement('div');
                div.className = 'answer-indicator ' + (res.isCorrect ? 'correct' : 'incorrect');
                div.innerHTML = res.isCorrect
                    ? '<i class="fas fa-check"></i> Correct!'
                    : `<i class="fas fa-times"></i> Incorrect. Correct: <strong>${formatCorrectAnswer(res.correct)}</strong>`;
                target.appendChild(div);
            }
        }

        closeModalBtn.addEventListener('click', () => resultsModal.style.display = 'none');
        reviewBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
            showCorrectAnswers();
            scrollToQuestion(QUESTION_START);
        });

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testContainer').classList.remove('hidden');
            timerInterval = setInterval(updateTimer, 1000);
        }

        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }, 2000);
    </script>
</body>

</html>
