<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }

        .loading-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9999;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-title {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #9ca3af;
        }

        .start-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9998;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        .start-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .start-button {
            padding: 12px 32px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .start-button:hover {
            background-color: #1d4ed8;
        }

        .hidden {
            display: none !important;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        header {
            background-color: #ffffff;
            color: #333;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .passage-info {
            font-size: 0.9rem;
            font-weight: 500;
            color: #2d3748;
        }

        .timer {
            background-color: rgba(255, 193, 193, 0.5);
            padding: 6px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            min-width: 80px;
            text-align: center;
            font-size: 0.9rem;
            color: #c53030;
            border: 1px solid rgba(255, 120, 120, 0.3);
        }

        .timer.warning {
            color: #9b2c2c;
            background-color: rgba(254, 178, 178, 0.7);
            border-color: rgba(245, 101, 101, 0.5);
        }

        .logo-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            cursor: pointer;
        }

        .logo-area:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }

        .logo-area i {
            font-size: 1.1rem;
        }

        .progress-container {
            background-color: #f8f9fa;
            padding: 4px 20px;
            z-index: 100;
            flex-shrink: 0;
            border-top: 1px solid #e2e8f0;
        }

        .progress-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .progress-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .progress-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            border: 1px solid #cbd5e0;
        }

        .progress-item.current {
            background-color: #4299e1;
            color: white;
            transform: scale(1.1);
            border-color: #2b6cb0;
        }

        .progress-item.answered {
            background-color: #9ae6b4;
            color: #22543d;
            border-color: #68d391;
        }

        .progress-item.correct {
            background-color: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .progress-item.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border-color: #feb2b2;
        }

        .progress-item:hover {
            background-color: #cbd5e0;
            transform: scale(1.05);
        }

        .btn {
            padding: 6px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
            background-color: #f7fafc;
            color: #4a5568;
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-primary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-primary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-secondary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-secondary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-submit {
            background-color: #48bb78;
            color: white;
            font-weight: 900;
            border: 1px solid #38a169;
        }

        .btn-submit:hover {
            background-color: #38a169;
            border-color: #2f855a;
        }

        .btn-submit:disabled {
            background-color: #9ae6b4;
            color: #718096;
            cursor: not-allowed;
            border: 1px solid #68d391;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fafafa;
            position: relative;
        }

        .resizer {
            width: 4px;
            background-color: #cbd5e0;
            cursor: col-resize;
            position: relative;
            transition: background-color 0.2s;
        }

        .resizer:hover {
            background-color: #a0aec0;
        }

        .resizer::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 60px;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: 4px;
            pointer-events: none;
        }

        .questions-container {
            width: 40%;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border-left: 1px solid #e2e8f0;
        }

        .passage {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage-content p {
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage p {
            margin-top: 20px;
            margin-bottom: 25px;
            text-align: justify;
        }

        .question-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question {
            margin-bottom: 25px;
            padding: 6px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background-color: #ffffff;
            transition: box-shadow 0.2s;
        }

        .question:hover {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .option:hover {
            background-color: #f7fafc;
            border-color: #cbd5e0;
        }

        .option input {
            margin-right: 2px;
            width: 16px;
            height: 16px;
        }

        .input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .input-field:focus {
            border-color: #4299e1;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.2);
        }

        select.input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        th,
        td {
            border: 1px solid #e2e8f0;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f1f5f9;
            font-weight: 600;
            color: #2d3748;
        }

        .answer-indicator {
            background-color: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .answer-indicator.correct {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .answer-indicator.incorrect {
            background-color: #fed7d7;
            border-color: #fc8181;
            color: #742a2a;
        }

        .question-group {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-group-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
            font-size: 1rem;
        }

        .highlight {
            background-color: #ffff00;
            cursor: pointer;
        }

        #highlight-btn,
        #remove-highlight-btn {
            position: absolute;
            z-index: 9999;
            display: none;
            padding: 6px 12px;
            font-size: 14px;
            border: 1px solid #888;
            border-radius: 4px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .score-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2d3748;
        }

        .score-breakdown {
            margin: 20px 0;
            text-align: left;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .questions-container {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .resizer {
                width: 100%;
                height: 4px;
                cursor: row-resize;
            }

            .resizer::before {
                width: 60px;
                height: 30px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }

            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .logo-area {
                order: 1;
            }

            .passage-info {
                order: 2;
            }

            .timer {
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }
        }
    </style>
</head>




<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 class="loading-title">Your test will begin shortly</h2>
            <p class="loading-subtitle">Please wait</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen hidden">
        <div class="start-content">
            <h1 class="start-title">IELTSwithJurabek</h1>
            <p class="start-subtitle">Ready to begin your reading test?</p>
            <button class="start-button" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <!-- Test Container -->
    <div class="container hidden" id="testContainer">
        <header>
            <div class="passage-info">IELTSwithJurabek</div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span>20:00</span>
            </div>
            <div class="logo-area" onclick="window.open('https://t.me/IELTSwithJurabek', '_blank')">
                <i class="fas fa-paper-plane"></i>
                <span>Click for more TESTS</span>
            </div>
        </header>

        <button id="highlight-btn" type="button">Highlight</button>
        <button id="remove-highlight-btn" type="button">Remove Highlight</button>

        <div class="main-content">
            <!-- Reading Passage -->
            <div class="passage-container" role="region" aria-label="Reading Passage">
                <h2 class="section-title">READING PASSAGE 3</h2>
                <div class="passage-content" id="passage3">
                    <h3>Book Review on Musicophilia</h3>
                    <p><strong>A</strong> Music and the brain are both endlessly fascinating subjects, and as a
                        neuroscientist specialising in auditory learning and memory, I find them especially intriguing.
                        So I had high expectations of Musicophilia, the latest offering from neurologist and prolific
                        author Oliver Sacks. And I confess to feeling a little guilty reporting that my reactions to the
                        book are mixed.</p>
                    <p><strong>B</strong> Sacks himself is the best part of Musicophilia. He richly documents his own
                        life in the book and reveals highly personal experiences. The photograph of him on the cover of
                        the book-which shows him wearing headphones, eyes closed, clearly enchanted as he listens to
                        Alfred Brendel perform Beethoven’s Pathetique Sonata-makes a positive impression that is borne
                        out by the contents of the book. Sacks’s voice throughout is steady and erudite but never
                        pontifical. He is neither self-conscious nor self-promoting.</p>
                    <p><strong>C</strong> The preface gives a good idea of what the book will deliver. In it Sacks
                        explains that he wants to convey the insights gleaned from the “enormous and rapidly growing
                        body of work on the neural underpinnings of musical perception and imagery, and the complex and
                        often bizarre disorders to which these are prone.” He also stresses the importance of “the
                        simple art of observation” and “the richness of the human context.” He wants to combine
                        “observation and description with the latest in technology,” he says, and to imaginatively enter
                        into the experience of his patients and subjects. The reader can see that Sacks, who has been
                        practicing neurology for 40 years, is torn between the “old-fashioned” path of observation and
                        the new fangled, high-tech approach: He knows that he needs to take heed of the latter, but his
                        heart lies with the former.</p>
                    <p><strong>D</strong> The book consists mainly of detailed descriptions of cases, most of them
                        involving patients whom Sacks has seen in his practice. Brief discussions of contemporary
                        neuroscientific reports are sprinkled liberally throughout the text. Part I, “Haunted by Music,”
                        begins with the strange case of Tony Cicoria, a nonmusical, middle-aged surgeon who was consumed
                        by a love of music after being hit by lightning. He suddenly began to crave listening to piano
                        music, which he had never cared for in the past. He started to play the piano and then to
                        compose music, which arose spontaneously in his mind in a “torrent” of notes. How could this
                        happen? Was the cause psychological? (He had had a near-death experience when the lightning
                        struck him.) Or was it the direct result of a change in the auditory regions of his cerebral
                        cortex? Electroencephalography (EEG) showed his brain waves to be normal in the mid-1990s, just
                        after his trauma and subsequent “conversion” to music. There are now more sensitive tests, but
                        Cicoria has declined to undergo them; he does not want to delve into the causes of his
                        musicality. What a shame!</p>
                    <p><strong>E</strong> Part II, “A Range of Musicality,” covers a wider variety of topics, but
                        unfortunately, some of the chapters offer little or nothing that is new. For example, chapter
                        13, which is five pages long, merely notes that the blind often have better hearing than the
                        sighted. The most interesting chapters are those that present the strangest cases. Chapter 8 is
                        about “amusia,” an inability to hear sounds as music, and “dysharmonia,” a highly specific
                        impairment of the ability to hear harmony, with the ability to understand melody left intact.
                        Such specific “dissociations” are found throughout the cases Sacks recounts.</p>
                    <p><strong>F</strong> To Sacks’s credit, part III, “Memory, Movement and Music,” brings us into the
                        underappreciated realm of music therapy. Chapter 16 explains how “melodic intonation therapy” is
                        being used to help expressive aphasic patients (those unable to express their thoughts verbally
                        following a stroke or other cerebral incident) once again become capable of fluent speech. In
                        chapter 20, Sacks demonstrates the near-miraculous power of music to animate Parkinson’s
                        patients and other people with severe movement disorders, even those who are frozen into odd
                        postures. Scientists cannot yet explain how music achieves this effect.</p>
                    <p><strong>G</strong> To readers who are unfamiliar with neuroscience and music behavior,
                        Musicophilia may be something of a revelation. But the book will not satisfy those seeking the
                        causes and implications of the phenomena Sacks describes. For one thing, Sacks appears to be
                        more at ease discussing patients than discussing experiments. And he tends to be rather
                        uncritical in accepting scientific findings and theories.</p>
                    <p><strong>H</strong> It’s true that the causes of music-brain oddities remain poorly understood.
                        However, Sacks could have done more to draw out some of the implications of the careful
                        observations that he and other neurologists have made and of the treatments that have been
                        successful. For example, he might have noted that the many specific dissociations among
                        components of music comprehension, such as loss of the ability to perceive harmony but not
                        melody, indicate that there is no music center in the brain. Because many people who read the
                        book are likely to believe in the brain localisation of all mental functions, this was a missed
                        educational opportunity.</p>
                    <p><strong>I</strong> Another conclusion one could draw is that there seem to be no “cures” for
                        neurological problems involving music. A drug can alleviate a symptom in one patient and
                        aggravate it in another, or can have both positive and negative effects in the same patient.
                        Treatments mentioned seem to be almost exclusively antiepileptic medications, which “damp down”
                        the excitability of the brain in general; their effectiveness varies widely.</p>
                    <p><strong>J</strong> Finally, in many of the cases described here the patient with music-brain
                        symptoms is reported to have “normal” EEG results. Although Sacks recognises the existence of
                        new technologies, among them far more sensitive ways to analyze brain waves than the standard
                        neurological EEG test, he does not call for their use. In fact, although he exhibits the
                        greatest compassion for patients, he conveys no sense of urgency about the pursuit of new
                        avenues in the diagnosis and treatment of music-brain disorders. This absence echoes the book’s
                        preface, in which Sacks expresses fear that “the simple art of observation may be lost” if we
                        rely too much on new technologies. He does call for both approaches, though, and we can only
                        hope that the neurological community will respond.</p>
                </div>
            </div>

            <div class="resizer" id="resizer"></div>

            <!-- Questions -->
            <div class="questions-container" id="questions" role="region" aria-label="Questions">
                <h2 class="section-title">Questions 27-40</h2>
                <p>You should spend about 20 minutes on Questions 27–40, which are based on Reading Passage 3.</p>

                <div class="question-group">
                    <div class="question-group-title">Questions 27-30</div>
                    <p>Choose the correct letter, <strong>A, B, C, or D</strong>.<br>
                        Write your answers in boxes <strong>27–30</strong> on your answer sheet.</p>

                    <div class="question" data-question="27">
                        <div class="question-text">27. Why does the writer have a mixed feeling about the book?</div>
                        <div class="options">
                            <label><input type="radio" name="q27" value="A"> A. The guilty feeling made him so.</label>
                            <label><input type="radio" name="q27" value="B"> B. The writer expected it to be better than
                                it was.</label>
                            <label><input type="radio" name="q27" value="C"> C. Sacks failed to include his personal
                                stories in the book.</label>
                            <label><input type="radio" name="q27" value="D"> D. This is the only book written by
                                Sacks.</label>
                        </div>
                    </div>

                    <div class="question" data-question="28">
                        <div class="question-text">28. What is the best part of the book?</div>
                        <div class="options">
                            <label><input type="radio" name="q28" value="A"> A. the photo of Sacks listening to
                                music</label>
                            <label><input type="radio" name="q28" value="B"> B. the tone of voice of the book</label>
                            <label><input type="radio" name="q28" value="C"> C. the autobiographical description in the
                                book</label>
                            <label><input type="radio" name="q28" value="D"> D. the description of Sacks’s
                                wealth</label>
                        </div>
                    </div>

                    <div class="question" data-question="29">
                        <div class="question-text">29. In the preface, what did Sacks try to achieve?</div>
                        <div class="options">
                            <label><input type="radio" name="q29" value="A"> A. make a herald introduction of the
                                research work and technique applied</label>
                            <label><input type="radio" name="q29" value="B"> B. give detailed description of various
                                musical disorders</label>
                            <label><input type="radio" name="q29" value="C"> C. explain why he needs to do away with
                                simple observation</label>
                            <label><input type="radio" name="q29" value="D"> D. explain why he needs to do away with
                                simple observation</label>
                        </div>
                    </div>

                    <div class="question" data-question="30">
                        <div class="question-text">30. What is disappointing about Tony Cicoria’s case?</div>
                        <div class="options">
                            <label><input type="radio" name="q30" value="A"> A. He refuses to have further
                                tests.</label>
                            <label><input type="radio" name="q30" value="B"> B. He can’t determine the cause of his
                                sudden musicality.</label>
                            <label><input type="radio" name="q30" value="C"> C. He nearly died because of the
                                lightning.</label>
                            <label><input type="radio" name="q30" value="D"> D. His brain waves were too normal to show
                                anything.</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 31-36</div>
                    <p>Do the following statements agree with the views of the writer in Reading Passage 3?<br>
                        In boxes <strong>31–36</strong> on your answer sheet, write:<br>
                        <strong>TRUE</strong> – if the statement agrees with the views of the writer<br>
                        <strong>FALSE</strong> – if the statement contradicts the views of the writer<br>
                        <strong>NOT GIVEN</strong> – if it is impossible to say what the writer thinks about this
                    </p>

                    <div class="question" data-question="31">
                        <div class="question-text">31. It is difficult to give a well-reputable writer a less than
                            totally favorable review.</div>
                        <div class="options">
                            <label><input type="radio" name="q31" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q31" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q31" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>

                    <div class="question" data-question="32">
                        <div class="question-text">32. Beethoven’s Pathetique Sonata is a good treatment for musical
                            disorders.</div>
                        <div class="options">
                            <label><input type="radio" name="q32" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q32" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q32" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>

                    <div class="question" data-question="33">
                        <div class="question-text">33. Sacks believes technological methods is of little importance
                            compared with traditional observation when studying his patients.</div>
                        <div class="options">
                            <label><input type="radio" name="q33" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q33" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q33" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>

                    <div class="question" data-question="34">
                        <div class="question-text">34. It is difficult to understand why music therapy is undervalued.
                        </div>
                        <div class="options">
                            <label><input type="radio" name="q34" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q34" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>

                    <div class="question" data-question="35">
                        <div class="question-text">35. Sacks held little skepticism when borrowing other theories and
                            findings in describing reasons and notion for phenomena he depicts in the book.</div>
                        <div class="options">
                            <label><input type="radio" name="q35" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q35" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>

                    <div class="question" data-question="36">
                        <div class="question-text">36. Sacks is in a rush to use new testing methods to do treatment for
                            patients.</div>
                        <div class="options">
                            <label><input type="radio" name="q36" value="TRUE"> TRUE</label>
                            <label><input type="radio" name="q36" value="FALSE"> FALSE</label>
                            <label><input type="radio" name="q36" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 37-40</div>
                    <p>Complete each sentence with the correct ending, <strong>A-F</strong>, below.<br>
                        Write the correct letter, <strong>A-F</strong>, in boxes <strong>37–40</strong> on your answer
                        sheet.</p>
                    <p>
                        37. The content covered dissociations in understanding between harmony and melody <select
                            name="q37" class="summary-select">
                            <option value="">Select</option>
                            <option value="A">A. show no music-brain disorders.</option>
                            <option value="B">B. indicates that medication can have varied results.</option>
                            <option value="C">C. is key for the neurological community to unravel the mysteries.
                            </option>
                            <option value="D">D. should not be used in isolation.</option>
                            <option value="E">E. indicate that not everyone can receive good education.</option>
                            <option value="F">F. show a misconception that there is function centre localized in the
                                brain.</option>
                        </select><br>
                        38. The study of treating musical disorders <select name="q38" class="summary-select">
                            <option value="">Select</option>
                            <option value="A">A. show no music-brain disorders.</option>
                            <option value="B">B. indicates that medication can have varied results.</option>
                            <option value="C">C. is key for the neurological community to unravel the mysteries.
                            </option>
                            <option value="D">D. should not be used in isolation.</option>
                            <option value="E">E. indicate that not everyone can receive good education.</option>
                            <option value="F">F. show a misconception that there is function centre localized in the
                                brain.</option>
                        </select><br>
                        39. The EEG scans of Sacks’s patients <select name="q39" class="summary-select">
                            <option value="">Select</option>
                            <option value="A">A. show no music-brain disorders.</option>
                            <option value="B">B. indicates that medication can have varied results.</option>
                            <option value="C">C. is key for the neurological community to unravel the mysteries.
                            </option>
                            <option value="D">D. should not be used in isolation.</option>
                            <option value="E">E. indicate that not everyone can receive good education.</option>
                            <option value="F">F. show a misconception that there is function centre localized in the
                                brain.</option>
                        </select><br>
                        40. Sacks believes testing based on new technologies <select name="q40" class="summary-select">
                            <option value="">Select</option>
                            <option value="A">A. show no music-brain disorders.</option>
                            <option value="B">B. indicates that medication can have varied results.</option>
                            <option value="C">C. is key for the neurological community to unravel the mysteries.
                            </option>
                            <option value="D">D. should not be used in isolation.</option>
                            <option value="E">E. indicate that not everyone can receive good education.</option>
                            <option value="F">F. show a misconception that there is function centre localized in the
                                brain.</option>
                        </select>
                    </p>
                </div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-nav">
                <div class="progress-items">
                    <div class="progress-item current" data-question="27">27</div>
                    <div class="progress-item" data-question="28">28</div>
                    <div class="progress-item" data-question="29">29</div>
                    <div class="progress-item" data-question="30">30</div>
                    <div class="progress-item" data-question="31">31</div>
                    <div class="progress-item" data-question="32">32</div>
                    <div class="progress-item" data-question="33">33</div>
                    <div class="progress-item" data-question="34">34</div>
                    <div class="progress-item" data-question="35">35</div>
                    <div class="progress-item" data-question="36">36</div>
                    <div class="progress-item" data-question="37">37</div>
                    <div class="progress-item" data-question="38">38</div>
                    <div class="progress-item" data-question="39">39</div>
                    <div class="progress-item" data-question="40">40</div>
                </div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prev-btn" disabled><i class="fas fa-arrow-left"></i>
                        Previous</button>
                    <button class="btn btn-secondary" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-submit" id="submit-btn">Submit Test <i
                            class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <h2>Test Results</h2>
            <div class="score-display" id="score-display">0/14</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <span>Passage 3:</span>
                    <span id="passage3-score">0/14</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="close-modal">Close</button>
                <button class="btn btn-primary" id="review-answers">Review Answers</button>
            </div>
        </div>
    </div>

    <script>
        // Correct Answers for Questions 27-40
        const correctAnswers = {
            q27: "B",
            q28: "C",
            q29: "A",
            q30: "A",
            q31: "TRUE",
            q32: "NOT GIVEN",
            q33: "FALSE",
            q34: "NOT GIVEN",
            q35: "TRUE",
            q36: "FALSE",
            q37: "F",
            q38: "B",
            q39: "A",
            q40: "D"
        };

        let lastSelection = null;
        let highlightTarget = null;
        let currentPanel = null;
        let submitted = false;
        let currentQuestion = 27;
        let isResizing = false;
        let seconds = 20 * 60; // 20 minutes for one passage
        let timerInterval;

        const highlightBtn = document.getElementById('highlight-btn');
        const removeHighlightBtn = document.getElementById('remove-highlight-btn');
        const passagePanel = document.querySelector('.passage-container');
        const questionsPanel = document.getElementById('questions');
        const resizer = document.getElementById('resizer');
        const submitBtn = document.getElementById('submit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsModal = document.getElementById('results-modal');
        const scoreDisplay = document.getElementById('score-display');
        const passage3Score = document.getElementById('passage3-score');
        const closeModalBtn = document.getElementById('close-modal');
        const reviewBtn = document.getElementById('review-answers');
        const timerElement = document.querySelector('.timer span');
        const timerContainer = document.querySelector('.timer');

        // Timer
        function updateTimer() {
            seconds--;
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 2 * 60) {
                timerContainer.classList.add('warning');
            }
            if (seconds <= 0) {
                clearInterval(timerInterval);
                if (!submitted) {
                    alert('Time is up! Submitting your test.');
                    submitTest();
                }
            }
        }

        // Highlight functionality
        function getValidSelection() {
            const sel = window.getSelection();
            if (!sel.rangeCount || sel.isCollapsed) return null;
            const range = sel.getRangeAt(0);
            if (passagePanel.contains(range.commonAncestorContainer)) {
                currentPanel = passagePanel;
            } else if (questionsPanel.contains(range.commonAncestorContainer)) {
                currentPanel = questionsPanel;
            } else {
                return null;
            }
            return range;
        }

        function showHighlightBtn(range) {
            const rect = range.getBoundingClientRect();
            highlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            highlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            highlightBtn.style.display = 'block';
        }

        function hideHighlightBtn() {
            highlightBtn.style.display = 'none';
        }

        function showRemoveBtn(span) {
            const rect = span.getBoundingClientRect();
            removeHighlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            removeHighlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            removeHighlightBtn.style.display = 'block';
            highlightTarget = span;
        }

        function hideRemoveBtn() {
            removeHighlightBtn.style.display = 'none';
            highlightTarget = null;
        }

        highlightBtn.addEventListener('click', () => {
            if (lastSelection) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(lastSelection.extractContents());
                lastSelection.insertNode(span);
                window.getSelection().removeAllRanges();
                hideHighlightBtn();
            }
        });

        removeHighlightBtn.addEventListener('click', () => {
            if (highlightTarget) {
                const parent = highlightTarget.parentNode;
                while (highlightTarget.firstChild) {
                    parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                }
                parent.removeChild(highlightTarget);
                hideRemoveBtn();
            }
        });

        document.addEventListener('selectionchange', () => {
            hideHighlightBtn();
            hideRemoveBtn();
            const range = getValidSelection();
            if (range) {
                lastSelection = range;
                showHighlightBtn(range);
            } else {
                lastSelection = null;
            }
        });

        [passagePanel, questionsPanel].forEach(panel => {
            panel.addEventListener('scroll', () => {
                hideHighlightBtn();
                hideRemoveBtn();
            });
        });

        document.addEventListener('mousedown', (e) => {
            if (e.target !== highlightBtn && e.target !== removeHighlightBtn) {
                hideHighlightBtn();
                hideRemoveBtn();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('highlight')) {
                e.preventDefault();
                showRemoveBtn(e.target);
            }
        });

        // Resizer
        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const container = document.querySelector('.main-content');
            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const containerWidth = containerRect.width;
            const leftPercentage = (mouseX / containerWidth) * 100;
            const rightPercentage = 100 - leftPercentage;
            if (leftPercentage >= 30 && leftPercentage <= 70) {
                document.querySelector('.passage-container').style.flex = leftPercentage + '%';
                document.querySelector('.questions-container').style.width = rightPercentage + '%';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });

        // Navigation
        function scrollToQuestion(num) {
            const el = document.querySelector(`[data-question="${num}"]`) || document.querySelector(`select[name="q${num}"]`).parentNode;
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            updateCurrentQuestion(num);
        }

        function updateCurrentQuestion(num) {
            currentQuestion = num;
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('current');
                if (item.dataset.question == num) item.classList.add('current');
            });
            prevBtn.disabled = num <= 27;
            nextBtn.disabled = num >= 40;
        }

        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                scrollToQuestion(parseInt(item.dataset.question));
            });
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 27) scrollToQuestion(currentQuestion - 1);
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < 40) scrollToQuestion(currentQuestion + 1);
        });

        // Event listener for marking questions as answered
        document.querySelectorAll('input[type="radio"], select').forEach(input => {
            input.addEventListener('change', () => {
                if (submitted) return;
                const qNumMatch = input.name.match(/^q(\d+)$/);
                if (qNumMatch) {
                    const qNum = parseInt(qNumMatch[1]);
                    const item = document.querySelector(`.progress-item[data-question="${qNum}"]`);
                    if (item && !item.classList.contains('answered')) {
                        const value = input.tagName === 'SELECT' ? input.value : input.value.trim();
                        if (value) {
                            item.classList.add('answered');
                        }
                    }
                }
            });
        });

        submitBtn.addEventListener('click', submitTest);

        function submitTest() {
            if (submitted) return;
            if (!confirm('Are you sure you want to submit?')) return;
            submitted = true;
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submitted';
            let score = 0;
            const results = {};

            // Process questions 27-30 and 31-36 (radio buttons)
            for (let i of [27, 28, 29, 30, 31, 32, 33, 34, 35, 36]) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const checkedRadio = document.querySelector(`input[name="${key}"]:checked`);
                if (checkedRadio) {
                    userAnswer = checkedRadio.value;
                    isCorrect = userAnswer === correctAnswers[key];
                    document.querySelectorAll(`input[name="${key}"]`).forEach(radio => {
                        radio.disabled = true;
                    });
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Process questions 37-40 (dropdowns)
            for (let i = 37; i <= 40; i++) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (selectEl && selectEl.value && selectEl.value !== '') {
                    userAnswer = selectEl.value;
                    isCorrect = userAnswer === correctAnswers[key];
                    selectEl.disabled = true;
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            scoreDisplay.textContent = `${score}/14`;
            passage3Score.textContent = `${score}/14`;
            for (let i = 27; i <= 40; i++) {
                const item = document.querySelector(`.progress-item[data-question="${i}"]`);
                const res = results[`q${i}`];
                if (item && res) {
                    item.classList.remove('current', 'answered');
                    item.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                }
            }
            window.testResults = results;
            resultsModal.style.display = 'flex';
        }

        function showCorrectAnswers() {
            if (!submitted) return;
            document.querySelectorAll('.answer-indicator').forEach(el => el.remove());

            // Process questions 27-30 and 31-36 (radio buttons)
            for (let i of [27, 28, 29, 30, 31, 32, 33, 34, 35, 36]) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const targetElement = document.querySelector(`[data-question="${i}"] .options`);
                if (!targetElement) continue;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }

            // Process questions 37-40 (dropdowns)
            for (let i = 37; i <= 40; i++) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (!selectEl) continue;
                const targetElement = selectEl.parentNode;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                div.style.display = 'inline-block';
                div.style.marginLeft = '10px';
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }
        }

        closeModalBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
        });

        reviewBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
            showCorrectAnswers();
            scrollToQuestion(27);
        });

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testContainer').classList.remove('hidden');
            timerInterval = setInterval(updateTimer, 1000);
        }

        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }, 2000);
    </script>
</body>

</html>