<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }

        .loading-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9999;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-title {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #9ca3af;
        }

        .start-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9998;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        .start-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .start-button {
            padding: 12px 32px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .start-button:hover {
            background-color: #1d4ed8;
        }

        .hidden {
            display: none !important;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        header {
            background-color: #ffffff;
            color: #333;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .passage-info {
            font-size: 0.9rem;
            font-weight: 500;
            color: #2d3748;
        }

        .timer {
            background-color: rgba(255, 193, 193, 0.5);
            padding: 6px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            min-width: 80px;
            text-align: center;
            font-size: 0.9rem;
            color: #c53030;
            border: 1px solid rgba(255, 120, 120, 0.3);
        }

        .timer.warning {
            color: #9b2c2c;
            background-color: rgba(254, 178, 178, 0.7);
            border-color: rgba(245, 101, 101, 0.5);
        }

        .logo-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            cursor: pointer;
        }

        .logo-area:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }

        .logo-area i {
            font-size: 1.1rem;
        }

        .progress-container {
            background-color: #f8f9fa;
            padding: 4px 20px;
            z-index: 100;
            flex-shrink: 0;
            border-top: 1px solid #e2e8f0;
        }

        .progress-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .progress-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .progress-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            border: 1px solid #cbd5e0;
        }

        .progress-item.current {
            background-color: #4299e1;
            color: white;
            transform: scale(1.1);
            border-color: #2b6cb0;
        }

        .progress-item.answered {
            background-color: #9ae6b4;
            color: #22543d;
            border-color: #68d391;
        }

        .progress-item.correct {
            background-color: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .progress-item.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border-color: #feb2b2;
        }

        .progress-item:hover {
            background-color: #cbd5e0;
            transform: scale(1.05);
        }

        .btn {
            padding: 6px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
            background-color: #f7fafc;
            color: #4a5568;
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-primary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-primary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-secondary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-secondary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-submit {
            background-color: #48bb78;
            color: white;
            font-weight: 900;
            border: 1px solid #38a169;
        }

        .btn-submit:hover {
            background-color: #38a169;
            border-color: #2f855a;
        }

        .btn-submit:disabled {
            background-color: #9ae6b4;
            color: #718096;
            cursor: not-allowed;
            border: 1px solid #68d391;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fafafa;
            position: relative;
        }

        .resizer {
            width: 4px;
            background-color: #cbd5e0;
            cursor: col-resize;
            position: relative;
            transition: background-color 0.2s;
        }

        .resizer:hover {
            background-color: #a0aec0;
        }

        .resizer::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 60px;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: 4px;
            pointer-events: none;
        }

        .questions-container {
            width: 40%;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border-left: 1px solid #e2e8f0;
        }

        .passage {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage-content p {
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage p {
            margin-top: 20px;
            margin-bottom: 25px;
            text-align: justify;
        }

        .question-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question {
            margin-bottom: 25px;
            padding: 6px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background-color: #ffffff;
            transition: box-shadow 0.2s;
        }

        .question:hover {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .option:hover {
            background-color: #f7fafc;
            border-color: #cbd5e0;
        }

        .option input {
            margin-right: 2px;
            width: 16px;
            height: 16px;
        }

        .input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .input-field:focus {
            border-color: #4299e1;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.2);
        }

        select.input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        th,
        td {
            border: 1px solid #e2e8f0;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f1f5f9;
            font-weight: 600;
            color: #2d3748;
        }

        .answer-indicator {
            background-color: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .answer-indicator.correct {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .answer-indicator.incorrect {
            background-color: #fed7d7;
            border-color: #fc8181;
            color: #742a2a;
        }

        .question-group {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-group-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
            font-size: 1rem;
        }

        .highlight {
            background-color: #ffff00;
            cursor: pointer;
        }

        #highlight-btn,
        #remove-highlight-btn {
            position: absolute;
            z-index: 9999;
            display: none;
            padding: 6px 12px;
            font-size: 14px;
            border: 1px solid #888;
            border-radius: 4px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .score-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2d3748;
        }

        .score-breakdown {
            margin: 20px 0;
            text-align: left;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .questions-container {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .resizer {
                width: 100%;
                height: 4px;
                cursor: row-resize;
            }

            .resizer::before {
                width: 60px;
                height: 30px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }

            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .logo-area {
                order: 1;
            }

            .passage-info {
                order: 2;
            }

            .timer {
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }
        }
    </style>
</head>




<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 class="loading-title">Your test will begin shortly</h2>
            <p class="loading-subtitle">Please wait</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen hidden">
        <div class="start-content">
            <h1 class="start-title">IELTSwithJurabek</h1>
            <p class="start-subtitle">Ready to begin your reading test?</p>
            <button class="start-button" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <!-- Test Container -->
    <div class="container hidden" id="testContainer">
        <header>
            <div class="passage-info">IELTSwithJurabek</div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span>20:00</span>
            </div>
            <div class="logo-area" onclick="window.open('https://t.me/IELTSwithJurabek', '_blank')">
                <i class="fas fa-paper-plane"></i>
                <span>Click for more TESTS</span>
            </div>
        </header>

        <button id="highlight-btn" type="button">Highlight</button>
        <button id="remove-highlight-btn" type="button">Remove Highlight</button>

        <div class="main-content">
            <!-- Reading Passage -->
            <div class="passage-container" role="region" aria-label="Reading Passage">
                <h2 class="section-title">READING PASSAGE 3</h2>
                <div class="passage-content" id="passage">
                    <h3>Insect-inspired robots</h3>
                    <p><strong>A</strong> A tiny insect navigates its way across featureless salt-pans. A cockroach
                        successfully works out how to scramble over an obstacle. The mantis shrimp scans its aquatic
                        world through hyperspectral eyes. Using the most basic of equipment and brains tinier than a
                        pinhead, insects constantly solve complex problems of movement, vision and navigation processing
                        data that would challenge a supercomputer. How they do it is driving one of the most exciting
                        new fields of technology - biomimetics and biorobotics, the imitation of insect systems to
                        control man-made machines. Delegates at a recent conference presented some outcomes of their
                        work in this area.</p>
                    <p><strong>B</strong> Dr Alex Zelinsky suggested that the method by which wasps use landmarks to
                        find their way back to the nest may one day be part of a system for navigating cars that ‘know’
                        where to go. A research team led by Dr Zelinsky has shown that a robot can navigate its way
                        along 50 different landmarks by recognizing them individually using a panoramic camera. ‘The
                        inspiration came from biology, where wasps use a practice called “turn back and look” to orient
                        themselves as they emerge from its nest. By flying to and fro, they lock in images of the nest
                        from different angles and perspectives, so they can recognize it again,’ he explained. The
                        robot’s panoramic camera logs the surrounding area and its key landmarks, which are then sorted
                        in its computer according to how reliable they are as navigational aids. The landmarks are then
                        scaled, from small to large, so that the robot can recognize whether it is getting closer to or
                        further away from them. Their location is built into a map in its ‘mind’, which operates at
                        different scales and instructs the robot whether to turn left or right at a particular mark. The
                        technology provides a general way for a machine to navigate an unknown landscape.</p>
                    <p><strong>C</strong> For three decades, Professor Ruediger Wehner has journeyed from Switzerland to
                        the Sahara desert where Cataglyphis, a tiny ant with a brain weighing just 0.1 mg, performs acts
                        of navigational genius when it leaves its nest, forages for food and returns successfully.
                        Cataglyphis uses polarised light, caused when air molecules scatter light, to orient and steer
                        itself. Wehner’s team found the ant has a set of specialized photoreceptors along the upper rim
                        of its eyes that detect polarized light, while other receptors perform different navigational
                        tasks. As the sun moves, the ant notes its direction each time it leaves the nest and updates
                        its internal compass. Using other eye receptors it stores a ‘snapshot’ image of landmarks, close
                        to the nest entrance in its eyes and compares this with what it sees as it returns. The ant also
                        has a way of measuring distance traveled, while a ‘path integrator’ periodically informs the ant
                        of its current position relative to its point of departure. Rather than integrate all the
                        information it receives in its brain, the ant actually performs a number of complex calculations
                        in different organs. Like a supercomputer, the ant has many separate subroutines going on
                        simultaneously. Using the ant’s ability to steer by polarised light and to store and reuse
                        landscape images, Wehner and colleagues have built ‘Sahabot’, a small vehicle that uses
                        polarisers and a digital CCD camera to store 360o images of landmarks to the ones in its memory.
                    </p>
                    <p><strong>D</strong> Professor Robert Michelson had a different desert challenge – to design a
                        flying robot that can not only navigate but also stay aloft and hover in the thin atmosphere of
                        Mars. Drawing inspiration from insect flight, he has gone beyond nature to devise a completely
                        new concept for a flying machine. The ‘Entomopter’ is sort of double-ended dragonfly whose wings
                        beat reciprocally. Michelson says that the flapping-wing design gives the craft unusually high
                        lift compared with a fixed-wing flyer, enabling it to fly slowly or hover in the thin Martian
                        air - whereas a fixed-wing craft would have to move at more than 400 km/h and could not stop to
                        explore.</p>
                    <p><strong>E</strong> Engineer Roger Quinn and entomologist Professor Roy Ritzmann are taking their
                        inspiration from cockroaches. According to Quinn and Ritzmann, the ability of cockroaches to run
                        very fast over rough terrain may one day give rise to a completely new all-terrain vehicle with
                        six-legs, or maybe even wheel-like legs called ‘whegs’. The key to the cockroach’s remarkable
                        cross-country performance lies partly in the fact that its legs do a lot of the ‘thinking’
                        without having to consult the brain. Quinn and Ritzmann are drawing on cockroach skills to
                        create robotic walkers and control strategies that capture the remarkable capacity of these
                        insects to traverse complex terrain and navigate safely toward goals while avoiding obstacles.
                        The team has already designed a series of robots that run on six legs or on whegs, enabling them
                        to handle surprisingly rugged terrain.</p>
                    <p><strong>F</strong> International experts believe there are tremendous opportunities in
                        biorobotics. However, delegates at the conference had differing visions for the future of the
                        science. While some were concerned that the initial applications of biorobotics may be military,
                        others, such as Dr Barbara Webb, predicted swarms of tiny cheap insect-like robots as society’s
                        cleaners and collectors. Sonja Kleinlogel hoped the study of the hyperspectral eyes of the
                        mantis shrimp might yield remote sensors that keep watch over the environmental health of our
                        oceans. Several delegates were concerned about the ethical implications of biorobotics, and
                        urged that close attention be paid to this as the science and technologies develop.</p>
                </div>
            </div>

            <div class="resizer" id="resizer"></div>

            <!-- Questions -->
            <div class="questions-container" id="questions" role="region" aria-label="Questions">
                <h2 class="section-title">Questions 27-40</h2>
                <p>You should spend about 20 minutes on Questions 27-40, which are based on Reading Passage 3.</p>

                <div class="question-group">
                    <div class="question-group-title">Questions 27-32</div>
                    <p>Reading Passage 3 has six sections, A-F.<br>
                        Which section contains the following information?<br>
                        Write the correct letter, A-F, in boxes 27-32 on your answer sheet.</p>
                    <div class="question" data-question="27">
                        <div class="question-text">27. positive and negative possibilities for the use of
                            insect-inspired robots</div>
                        <div class="options">
                            <select name="q27" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="28">
                        <div class="question-text">28. how perceived size is used as an aid to navigation</div>
                        <div class="options">
                            <select name="q28" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="29">
                        <div class="question-text">29. an example of decision-making taking place in the limbs</div>
                        <div class="options">
                            <select name="q29" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="30">
                        <div class="question-text">30. a description of a potential aid in space exploration</div>
                        <div class="options">
                            <select name="q30" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="31">
                        <div class="question-text">31. the range of skills that have inspired biorobotics</div>
                        <div class="options">
                            <select name="q31" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="32">
                        <div class="question-text">32. how a variety of navigational methods operate at the same time
                        </div>
                        <div class="options">
                            <select name="q32" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 33-36</div>
                    <p>Answer the questions below.<br>
                        Choose <strong>NO MORE THAN THREE WORDS</strong> from the passage for each answer.<br>
                        Write your answers in boxes 33-36 on your answer sheet.</p>
                    <div class="summary-section">
                        <p>33. Which creature sees particularly well under water? <span class="question"
                                data-question="33"><input type="text" name="q33" class="summary-input"
                                    maxlength="50"></span></p>
                        <p>34. In addition to a computer, what technical equipment is fitted in Dr Zelinsky's robot?
                            <span class="question" data-question="34"><input type="text" name="q34"
                                    class="summary-input" maxlength="50"></span>
                        </p>
                        <p>35. Where is the Cataglyphis ant found? <span class="question" data-question="35"><input
                                    type="text" name="q35" class="summary-input" maxlength="50"></span></p>
                        <p>36. What atmospheric effect helps the Cataglyphis ant to know its direction? <span
                                class="question" data-question="36"><input type="text" name="q36" class="summary-input"
                                    maxlength="50"></span></p>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 37-40</div>
                    <p>Look at the following people (Questions 37-40) and the list of robots below.<br>
                        Match each person or people with the correct robot, A-G.<br>
                        Write the correct letter, A-G, in boxes 37-40 on your answer sheet.</p>
                    <p><strong>List of robots</strong><br>
                        A. a robot that makes use of light as well as stored images for navigational purposes<br>
                        B. a robot that can contribute to environmental health<br>
                        C. a robot that can move over difficult surfaces<br>
                        D. a robot that categorises information from the environment according to its usefulness<br>
                        E. a robot that can be used to clean surfaces and collect rubbish<br>
                        F. a robot that has improved on the ability of the insect on which it is based<br>
                        G. a robot that can replace soldiers in war
                    </p>
                    <div class="question" data-question="37">
                        <div class="question-text">37. Dr Alex Zelinsky</div>
                        <div class="options">
                            <select name="q37" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="38">
                        <div class="question-text">38. Professor Ruediger Wehner</div>
                        <div class="options">
                            <select name="q38" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="39">
                        <div class="question-text">39. Professor Robert Michelson</div>
                        <div class="options">
                            <select name="q39" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                    </div>
                    <div class="question" data-question="40">
                        <div class="question-text">40. Roger Quinn and Professor Roy Ritzmann</div>
                        <div class="options">
                            <select name="q40" class="summary-select">
                                <option value="">Select</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-nav">
                <div class="progress-items">
                    <div class="progress-item current" data-question="27">27</div>
                    <div class="progress-item" data-question="28">28</div>
                    <div class="progress-item" data-question="29">29</div>
                    <div class="progress-item" data-question="30">30</div>
                    <div class="progress-item" data-question="31">31</div>
                    <div class="progress-item" data-question="32">32</div>
                    <div class="progress-item" data-question="33">33</div>
                    <div class="progress-item" data-question="34">34</div>
                    <div class="progress-item" data-question="35">35</div>
                    <div class="progress-item" data-question="36">36</div>
                    <div class="progress-item" data-question="37">37</div>
                    <div class="progress-item" data-question="38">38</div>
                    <div class="progress-item" data-question="39">39</div>
                    <div class="progress-item" data-question="40">40</div>
                </div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prev-btn" disabled><i class="fas fa-arrow-left"></i>
                        Previous</button>
                    <button class="btn btn-secondary" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-submit" id="submit-btn">Submit Test <i
                            class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <h2>Test Results</h2>
            <div class="score-display" id="score-display">0/14</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <span>Passage 3:</span>
                    <span id="passage3-score">0/14</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="close-modal">Close</button>
                <button class="btn btn-primary" id="review-answers">Review Answers</button>
            </div>
        </div>
    </div>

    <script>
        // Correct Answers for Questions 27-40
        const correctAnswers = {
            q27: "F",
            q28: "B",
            q29: "E",
            q30: "D",
            q31: "A",
            q32: "C",
            q33: "Mantis shrimp",
            q34: "panoramic camera",
            q35: "Sahara desert",
            q36: "polarised light",
            q37: "D",
            q38: "A",
            q39: "F",
            q40: "C"
        };

        let lastSelection = null;
        let highlightTarget = null;
        let currentPanel = null;
        let submitted = false;
        let currentQuestion = 27;
        let isResizing = false;
        let seconds = 20 * 60; // 20 minutes
        let timerInterval;

        const highlightBtn = document.getElementById('highlight-btn');
        const removeHighlightBtn = document.getElementById('remove-highlight-btn');
        const passagePanel = document.getElementById('passage');
        const questionsPanel = document.getElementById('questions');
        const resizer = document.getElementById('resizer');
        const submitBtn = document.getElementById('submit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsModal = document.getElementById('results-modal');
        const scoreDisplay = document.getElementById('score-display');
        const passage3Score = document.getElementById('passage3-score');
        const closeModalBtn = document.getElementById('close-modal');
        const reviewBtn = document.getElementById('review-answers');
        const timerElement = document.querySelector('.timer span');
        const timerContainer = document.querySelector('.timer');

        // Timer
        function updateTimer() {
            seconds--;
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 2 * 60) {
                timerContainer.classList.add('warning');
            }
            if (seconds <= 0) {
                clearInterval(timerInterval);
                if (!submitted) {
                    alert('Time is up! Submitting your test.');
                    submitTest();
                }
            }
        }

        // Highlight functionality
        function getValidSelection() {
            const sel = window.getSelection();
            if (!sel.rangeCount || sel.isCollapsed) return null;
            const range = sel.getRangeAt(0);
            if (passagePanel.contains(range.commonAncestorContainer)) {
                currentPanel = passagePanel;
            } else if (questionsPanel.contains(range.commonAncestorContainer)) {
                currentPanel = questionsPanel;
            } else {
                return null;
            }
            return range;
        }

        function showHighlightBtn(range) {
            const rect = range.getBoundingClientRect();
            highlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            highlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            highlightBtn.style.display = 'block';
        }

        function hideHighlightBtn() {
            highlightBtn.style.display = 'none';
        }

        function showRemoveBtn(span) {
            const rect = span.getBoundingClientRect();
            removeHighlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            removeHighlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            removeHighlightBtn.style.display = 'block';
            highlightTarget = span;
        }

        function hideRemoveBtn() {
            removeHighlightBtn.style.display = 'none';
            highlightTarget = null;
        }

        highlightBtn.addEventListener('click', () => {
            if (lastSelection) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(lastSelection.extractContents());
                lastSelection.insertNode(span);
                window.getSelection().removeAllRanges();
                hideHighlightBtn();
            }
        });

        removeHighlightBtn.addEventListener('click', () => {
            if (highlightTarget) {
                const parent = highlightTarget.parentNode;
                while (highlightTarget.firstChild) {
                    parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                }
                parent.removeChild(highlightTarget);
                hideRemoveBtn();
            }
        });

        document.addEventListener('selectionchange', () => {
            hideHighlightBtn();
            hideRemoveBtn();
            const range = getValidSelection();
            if (range) {
                lastSelection = range;
                showHighlightBtn(range);
            } else {
                lastSelection = null;
            }
        });

        [passagePanel, questionsPanel].forEach(panel => {
            panel.addEventListener('scroll', () => {
                hideHighlightBtn();
                hideRemoveBtn();
            });
        });

        document.addEventListener('mousedown', (e) => {
            if (e.target !== highlightBtn && e.target !== removeHighlightBtn) {
                hideHighlightBtn();
                hideRemoveBtn();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('highlight')) {
                e.preventDefault();
                showRemoveBtn(e.target);
            }
        });

        // Resizer
        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const container = document.querySelector('.main-content');
            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const containerWidth = containerRect.width;
            const leftPercentage = (mouseX / containerWidth) * 100;
            const rightPercentage = 100 - leftPercentage;
            if (leftPercentage >= 30 && leftPercentage <= 70) {
                document.querySelector('.passage-container').style.flex = leftPercentage + '%';
                document.querySelector('.questions-container').style.width = rightPercentage + '%';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });

        // Navigation
        function scrollToQuestion(num) {
            const el = document.querySelector(`[data-question="${num}"]`);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            updateCurrentQuestion(num);
        }

        function updateCurrentQuestion(num) {
            currentQuestion = num;
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('current');
                if (item.dataset.question == num) item.classList.add('current');
            });
            prevBtn.disabled = num <= 27;
            nextBtn.disabled = num >= 40;
        }

        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                scrollToQuestion(parseInt(item.dataset.question));
            });
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 27) scrollToQuestion(currentQuestion - 1);
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < 40) scrollToQuestion(currentQuestion + 1);
        });

        document.querySelectorAll('select, input[type="text"]').forEach(input => {
            input.addEventListener('change', () => {
                if (submitted) return;
                const qNumMatch = input.name.match(/^q(\d+)$/);
                if (qNumMatch) {
                    const qNum = parseInt(qNumMatch[1]);
                    const item = document.querySelector(`.progress-item[data-question="${qNum}"]`);
                    if (item && !item.classList.contains('answered')) {
                        item.classList.add('answered');
                    }
                }
            });
        });

        submitBtn.addEventListener('click', submitTest);

        function submitTest() {
            if (submitted) return;
            if (!confirm('Are you sure you want to submit?')) return;
            submitted = true;
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submitted';
            let score = 0;
            const results = {};

            // Process questions 27-32 and 37-40 (dropdowns)
            for (let i of [27, 28, 29, 30, 31, 32, 37, 38, 39, 40]) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (selectEl && selectEl.value) {
                    userAnswer = selectEl.value;
                    isCorrect = userAnswer === correctAnswers[key];
                    selectEl.disabled = true;
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Process questions 33-36 (text inputs)
            for (let i = 33; i <= 36; i++) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const textEl = document.querySelector(`input[name="${key}"]`);
                if (textEl && textEl.value.trim()) {
                    userAnswer = textEl.value.trim().toLowerCase();
                    isCorrect = userAnswer === correctAnswers[key].toLowerCase();
                    textEl.disabled = true;
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            scoreDisplay.textContent = `${score}/14`;
            passage3Score.textContent = `${score}/14`;
            for (let i = 27; i <= 40; i++) {
                const item = document.querySelector(`.progress-item[data-question="${i}"]`);
                const res = results[`q${i}`];
                if (item && res) {
                    item.classList.remove('current', 'answered');
                    item.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                }
            }
            window.testResults = results;
            resultsModal.style.display = 'flex';
        }

        function showCorrectAnswers() {
            if (!submitted) return;
            document.querySelectorAll('.answer-indicator').forEach(el => el.remove());

            // Process questions 27-32 and 37-40 (dropdowns)
            for (let i of [27, 28, 29, 30, 31, 32, 37, 38, 39, 40]) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (!selectEl) continue;
                const targetElement = selectEl.closest('.question');
                if (!targetElement) continue;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }

            // Process questions 33-36 (text inputs)
            for (let i = 33; i <= 36; i++) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const textEl = document.querySelector(`input[name="${key}"]`);
                if (!textEl) continue;
                const targetElement = textEl.parentNode;
                if (!targetElement) continue;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                div.style.display = 'inline-block';
                div.style.marginLeft = '10px';
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }
        }

        closeModalBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
        });

        reviewBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
            showCorrectAnswers();
            scrollToQuestion(27);
        });

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testContainer').classList.remove('hidden');
            timerInterval = setInterval(updateTimer, 1000);
        }

        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }, 2000);
    </script>
</body>

</html>