<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow: hidden;
        }

        .loading-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9999;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2563eb;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-title {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: #9ca3af;
        }

        .start-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 9998;
        }

        .start-content {
            text-align: center;
        }

        .start-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 24px;
        }

        .start-subtitle {
            color: #6b7280;
            margin-bottom: 24px;
        }

        .start-button {
            padding: 12px 32px;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .start-button:hover {
            background-color: #1d4ed8;
        }

        .hidden {
            display: none !important;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        header {
            background-color: #ffffff;
            color: #333;
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .passage-info {
            font-size: 0.9rem;
            font-weight: 500;
            color: #2d3748;
        }

        .timer {
            background-color: rgba(255, 193, 193, 0.5);
            padding: 6px 12px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            min-width: 80px;
            text-align: center;
            font-size: 0.9rem;
            color: #c53030;
            border: 1px solid rgba(255, 120, 120, 0.3);
        }

        .timer.warning {
            color: #9b2c2c;
            background-color: rgba(254, 178, 178, 0.7);
            border-color: rgba(245, 101, 101, 0.5);
        }

        .logo-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
            cursor: pointer;
        }

        .logo-area:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.4);
        }

        .logo-area i {
            font-size: 1.1rem;
        }

        .progress-container {
            background-color: #f8f9fa;
            padding: 4px 20px;
            z-index: 100;
            flex-shrink: 0;
            border-top: 1px solid #e2e8f0;
        }

        .progress-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .progress-items {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-buttons {
            display: flex;
            gap: 6px;
        }

        .progress-item {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            border: 1px solid #cbd5e0;
        }

        .progress-item.current {
            background-color: #4299e1;
            color: white;
            transform: scale(1.1);
            border-color: #2b6cb0;
        }

        .progress-item.answered {
            background-color: #9ae6b4;
            color: #22543d;
            border-color: #68d391;
        }

        .progress-item.correct {
            background-color: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .progress-item.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border-color: #feb2b2;
        }

        .progress-item:hover {
            background-color: #cbd5e0;
            transform: scale(1.05);
        }

        .btn {
            padding: 6px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.95rem;
            background-color: #f7fafc;
            color: #4a5568;
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-primary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-primary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-secondary {
            background-color: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .btn-secondary:hover {
            background-color: #edf2f7;
            border-color: #a0aec0;
        }

        .btn-submit {
            background-color: #48bb78;
            color: white;
            font-weight: 900;
            border: 1px solid #38a169;
        }

        .btn-submit:hover {
            background-color: #38a169;
            border-color: #2f855a;
        }

        .btn-submit:disabled {
            background-color: #9ae6b4;
            color: #718096;
            cursor: not-allowed;
            border: 1px solid #68d391;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .passage-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #fafafa;
            position: relative;
        }

        .resizer {
            width: 4px;
            background-color: #cbd5e0;
            cursor: col-resize;
            position: relative;
            transition: background-color 0.2s;
        }

        .resizer:hover {
            background-color: #a0aec0;
        }

        .resizer::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 60px;
            background-color: rgba(203, 213, 224, 0.5);
            border-radius: 4px;
            pointer-events: none;
        }

        .questions-container {
            width: 40%;
            padding: 20px;
            overflow-y: auto;
            background-color: white;
            border-left: 1px solid #e2e8f0;
        }

        .passage {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage-content p {
            margin-top: 15px;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .passage p {
            margin-top: 20px;
            margin-bottom: 25px;
            text-align: justify;
        }

        .question-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question {
            margin-bottom: 25px;
            padding: 6px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background-color: #ffffff;
            transition: box-shadow 0.2s;
        }

        .question:hover {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .question-text {
            font-weight: 500;
            margin-bottom: 12px;
            color: #2d3748;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .option:hover {
            background-color: #f7fafc;
            border-color: #cbd5e0;
        }

        .option input {
            margin-right: 2px;
            width: 16px;
            height: 16px;
        }

        .input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .input-field:focus {
            border-color: #4299e1;
            outline: none;
            box-shadow: 0 0 0 2px rgba(66, 153, 225, 0.2);
        }

        select.input-field {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            width: 20%;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        th,
        td {
            border: 1px solid #e2e8f0;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f1f5f9;
            font-weight: 600;
            color: #2d3748;
        }

        .answer-indicator {
            background-color: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .answer-indicator.correct {
            background-color: #e6fffa;
            border-color: #38b2ac;
            color: #234e52;
        }

        .answer-indicator.incorrect {
            background-color: #fed7d7;
            border-color: #fc8181;
            color: #742a2a;
        }

        .question-group {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-group-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #2d3748;
            font-size: 1rem;
        }

        .highlight {
            background-color: #ffff00;
            cursor: pointer;
        }

        #highlight-btn,
        #remove-highlight-btn {
            position: absolute;
            z-index: 9999;
            display: none;
            padding: 6px 12px;
            font-size: 14px;
            border: 1px solid #888;
            border-radius: 4px;
            cursor: pointer;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .score-display {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2d3748;
        }

        .score-breakdown {
            margin: 20px 0;
            text-align: left;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.95rem;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .questions-container {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .resizer {
                width: 100%;
                height: 4px;
                cursor: row-resize;
            }

            .resizer::before {
                width: 60px;
                height: 30px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }

            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .logo-area {
                order: 1;
            }

            .passage-info {
                order: 2;
            }

            .timer {
                order: 3;
            }
        }

        @media (max-width: 480px) {
            .progress-item {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }

            .passage-info {
                font-size: 0.9rem;
            }
        }
    </style>
</head>



<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2 class="loading-title">Your test will begin shortly</h2>
            <p class="loading-subtitle">Please wait</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="startScreen" class="start-screen hidden">
        <div class="start-content">
            <h1 class="start-title">IELTSwithJurabek</h1>
            <p class="start-subtitle">Ready to begin your reading test?</p>
            <button class="start-button" onclick="startTest()">Start Test</button>
        </div>
    </div>

    <!-- Test Container -->
    <div class="container hidden" id="testContainer">
        <header>
            <div class="passage-info">IELTSwithJurabek</div>
            <div class="timer">
                <i class="fas fa-clock"></i>
                <span>20:00</span>
            </div>
            <div class="logo-area" onclick="window.open('https://t.me/IELTSwithJurabek', '_blank')">
                <i class="fas fa-paper-plane"></i>
                <span>Click for more TESTS</span>
            </div>
            <div class="passage-info">Passage 3 of 3</div>
        </header>

        <button id="highlight-btn" type="button">Highlight</button>
        <button id="remove-highlight-btn" type="button">Remove Highlight</button>

        <div class="main-content">
            <!-- Reading Passage -->
            <div class="passage-container" role="region" aria-label="Reading Passage">
                <h2 class="section-title">READING PASSAGE 3</h2>
                <div class="passage-content" id="passage3">
                    <h3>Marine mammals exhibit their ingenuity</h3>
                    <p id="P1"><span class="label">1</span> Dolphins use "tools" to help hunt for food. In the deep,
                        clear channels of Australia’s Shark Bay, bottlenose dolphins have discovered tools, raising
                        questions about the origins of intelligent behavior, the nature of learning, and the birth of
                        technology. There, dolphins in one extended family routinely use sponges* to protect their noses
                        as they forage for fish hidden in the abrasive seafloor sand, according to Georgetown University
                        scientists. As far as the researchers can tell, a single dolphin may have invented the technique
                        relatively recently and taught it to her offspring. The simple innovation dramatically changed
                        their behavior, hunting habits, and social life, the researchers found. Those that adopted it
                        became loners who spent much more time hunting than others and dive more deeply in search of
                        prey. The sponging dolphins teach the technique to all their young, but only the females seem to
                        grasp the idea. ‘It is indisputably tool use,’ says primate anthropologist Craig Stanford at the
                        University of Southern California, an authority on animal cognition and behavior. For those
                        seeking a glimpse of our own beginnings, the dolphins of Shark Bay offer a hint of the inventive
                        impulse that occurred when our earliest ancestors first shaped destiny by fashioning implements
                        with their hands.</p>
                    <p id="P2"><span class="label">2</span> Tool use of any sort among wild animals is rare, difficult
                        to document reliably, and controversial. The line between instinct, ingenuity, and intelligence
                        is easily blurred by wishful thinking, experts caution. Field observations often give rise to
                        scholarly disputes. Even so, 10 primate species of monkeys and apes, along with 30 species of
                        birds, are thought to use sticks, rocks, or leaves as tools.</p>
                    <p id="P3"><span class="label">3</span> In the first in-depth analysis of this natural dolphin
                        behavior, marine biologist and psychologist Dr. Janet Mann at Georgetown University and her
                        colleagues found that the dolphins of Shark Bay use their makeshift hunting masks more often
                        than any other species uses tools, except human beings. The curious hunting habit was first
                        observed by a local fisherman who reported to marine biologists that he had seen a dolphin with
                        an odd growth on its nose. Monitoring its movements through the bay’s unusually clear waters,
                        researchers soon discovered that the dolphin was actually balancing a conical basket sponge on
                        its nose.</p>
                    <p id="P4"><span class="label">4</span> At first, it was not evident what the dolphin was doing with
                        a sponge. Observing from a small boat, Dr. Mann and her colleagues eventually identified 41
                        dolphins who regularly used sponges to hunt, cataloging 1,295 dives in which they surfaced with
                        sponges on their snouts. Researchers were startled to realize that the dolphins of Shark Bay
                        employed one living creature as a tool to help hunt another. Not any basket sponge would do, the
                        researchers soon learned. The dolphins might search for 10 minutes to locate one with the right
                        conical shape to cap their nose, tear it free of its mooring, and then carry it to a preferred
                        hunting ground along channels between eight meters and 13 meters deep. ‘You can see that they
                        are scattering the sand gently as they go along,’ says Dr. Mann. ‘When they startle a fish out
                        of the sand, they immediately drop the sponge and go after it.’</p>
                    <p id="P5"><span class="label">5</span> ‘They return to retrieve the sponge and pick up the hunt
                        again, repeating the pattern. They really use these sponges as a foraging tool,’ says dolphin
                        biologist Maddalena Bearzi, president of the Ocean Conservation Society of Los Angeles. ‘They
                        discovered it could create an advantage in their foraging technique, and they pass it from
                        generation to generation.’ However, among the hundreds of dolphins living in this bay, only a
                        few dozen use sponges to keep from scraping their noses, and that offered researchers an
                        opportunity to compare creatures that use tools to others of the same species that do not.</p>
                    <p id="P6"><span class="label">6</span> Although these dolphins all appear to be related,
                        researchers at the University of New South Wales suggest that nurture, not nature, is the reason
                        these dolphins use tools, ruling out genetic explanations for the behavior. Instead, they are
                        convinced that the use of sponges is passed from one generation to the next through imitation.
                        Among bottlenose dolphins, mothers nurse their young for up to eight years, ample time for
                        calves to absorb their mother’s hunting tricks by observation. ‘This is an example of culture
                        among these animals,’ says Dr. Bearzi. ‘This is part of the reason it is so important.’</p>
                    <p id="P7"><span class="label">7</span> So far, almost all of the dolphin spongers have proved to be
                        female. ‘The sex difference is really striking,’ Dr. Mann says. ‘I don’t know of another species
                        where it is so dramatic.’ Of the sponging offspring, only the daughters could be seen still
                        sponging once they reached maturity. The sons tried it but almost always abandoned it. Male
                        dolphins rarely play a role in child-rearing and tend to fish in packs. For Dr. Mann, the
                        discovery that dolphins, too, are tool users adds an unexpected dimension to the history of
                        innovation, shedding new light on animal intelligence. Clever mimics and fast learners, dolphins
                        have unusually large brains — four times the size of a chimpanzee’s and second only to humans in
                        relative size. ‘It speaks to this whole issue of creativity and learning and brain size,’ she
                        says. ‘The number one question that drives me and others is: Why do dolphins have such big
                        brains? What are they doing down there in the water that requires them to be so smart?’</p>
                </div>
            </div>

            <div class="resizer" id="resizer"></div>

            <!-- Questions -->
            <div class="questions-container" id="questions" role="region" aria-label="Questions">
                <h2 class="section-title">Questions 27-40</h2>
                <p>You should spend about 20 minutes on Questions 27–40, which are based on Reading Passage 3.</p>

                <div class="question-group">
                    <div class="question-group-title">Questions 27-30</div>
                    <p>Do the following statements agree with the claims of the writer in Reading Passage 3? In boxes
                        <strong>27–30</strong> on your answer sheet, write:<br>
                        <strong>YES</strong> – if the statement agrees with the claims of the writer<br>
                        <strong>NO</strong> – if the statement contradicts the claims of the writer<br>
                        <strong>NOT GIVEN</strong> – if it is impossible to say what the writer thinks about this
                    </p>
                    <div class="question" data-question="27">
                        <div class="question-text">27. Researchers believe that the use of sponges for hunting may have
                            originated with one female dolphin's experimentation.</div>
                        <div class="options">
                            <label><input type="radio" name="q27" value="YES"> YES</label>
                            <label><input type="radio" name="q27" value="NO"> NO</label>
                            <label><input type="radio" name="q27" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="question" data-question="28">
                        <div class="question-text">28. Research into tool use by dolphins can help us understand the
                            origins of use of tools by humans.</div>
                        <div class="options">
                            <label><input type="radio" name="q28" value="YES"> YES</label>
                            <label><input type="radio" name="q28" value="NO"> NO</label>
                            <label><input type="radio" name="q28" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="question" data-question="29">
                        <div class="question-text">29. There is general agreement amongst researchers on the
                            relationship of tool use amongst animals and animal intelligence.</div>
                        <div class="options">
                            <label><input type="radio" name="q29" value="YES"> YES</label>
                            <label><input type="radio" name="q29" value="NO"> NO</label>
                            <label><input type="radio" name="q29" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                    <div class="question" data-question="30">
                        <div class="question-text">30. Dr. Mann's analysis of dolphin behaviour has been criticised by
                            some other scientists.</div>
                        <div class="options">
                            <label><input type="radio" name="q30" value="YES"> YES</label>
                            <label><input type="radio" name="q30" value="NO"> NO</label>
                            <label><input type="radio" name="q30" value="NOT GIVEN"> NOT GIVEN</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 31-35</div>
                    <p>Choose the correct letter, <strong>A, B, C, or D</strong>. Write the correct letter in boxes
                        <strong>31–35</strong> on your answer sheet.
                    </p>
                    <div class="question" data-question="31">
                        <div class="question-text">31. Some bottlenose dolphins in Shark Bay use sponges</div>
                        <div class="options">
                            <label><input type="radio" name="q31" value="A"> A. to attract fish</label>
                            <label><input type="radio" name="q31" value="B"> B. to avoid getting hurt</label>
                            <label><input type="radio" name="q31" value="C"> C. to supplement their diet</label>
                            <label><input type="radio" name="q31" value="D"> D. as a form of decoration</label>
                        </div>
                    </div>
                    <div class="question" data-question="32">
                        <div class="question-text">32. The use of sponges by bottlenose dolphins results in their</div>
                        <div class="options">
                            <label><input type="radio" name="q32" value="A"> A. living longer</label>
                            <label><input type="radio" name="q32" value="B"> B. attracting more mates</label>
                            <label><input type="radio" name="q32" value="C"> C. becoming more isolated</label>
                            <label><input type="radio" name="q32" value="D"> D. becoming more aggressive</label>
                        </div>
                    </div>
                    <div class="question" data-question="33">
                        <div class="question-text">33. The Shark Bay fisherman mentioned in the passage</div>
                        <div class="options">
                            <label><input type="radio" name="q33" value="A"> A. provided an explanation for the
                                dolphins' hunting habits</label>
                            <label><input type="radio" name="q33" value="B"> B. made numerous observations of the
                                dolphins in Shark Bay</label>
                            <label><input type="radio" name="q33" value="C"> C. notified the media about dolphins
                                balancing sponges on their noses</label>
                            <label><input type="radio" name="q33" value="D"> D. thought the sponge was permanently
                                attached to the dolphin's nose</label>
                        </div>
                    </div>
                    <div class="question" data-question="34">
                        <div class="question-text">34. The dolphins sometimes take some time to find a sponge because
                        </div>
                        <div class="options">
                            <label><input type="radio" name="q34" value="A"> A. some sponges are too heavy</label>
                            <label><input type="radio" name="q34" value="B"> B. sponges are quite rare in Shark
                                Bay</label>
                            <label><input type="radio" name="q34" value="C"> C. they are only satisfied with sponges
                                that fit well</label>
                            <label><input type="radio" name="q34" value="D"> D. they have individual preferences for
                                types of sponges</label>
                        </div>
                    </div>
                    <div class="question" data-question="35">
                        <div class="question-text">35. The fact that only a few dozen Shark Bay dolphins use sponges in
                            this way allowed researchers to</div>
                        <div class="options">
                            <label><input type="radio" name="q35" value="A"> A. investigate different behaviours within
                                one species</label>
                            <label><input type="radio" name="q35" value="B"> B. track individual members of a
                                species</label>
                            <label><input type="radio" name="q35" value="C"> C. decide whether the behaviour was tool
                                use or not</label>
                            <label><input type="radio" name="q35" value="D"> D. explain the purpose for the
                                behaviour</label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-group-title">Questions 36-40</div>
                    <p>Complete each sentence with the correct ending, <strong>A–H</strong>, below. Write the correct
                        letter, <strong>A–H</strong>, in boxes <strong>36–40</strong> on your answer sheet.</p>
                    <div class="question" data-question="36">
                        <div class="question-text">36. A genetic explanation for the dolphins' use of sponges</div>
                        <select name="q36">
                            <option value="" disabled selected>Select an option</option>
                            <option value="A">A. is more frequent amongst female dolphins</option>
                            <option value="B">B. is possibly linked to a physical characteristic</option>
                            <option value="C">C. is only possible in salt water</option>
                            <option value="D">D. is more typical of male dolphins</option>
                            <option value="E">E. is evidence of a dolphin's use of sound</option>
                            <option value="F">F. is a threat to commercial fishing</option>
                            <option value="G">G. is the most likely way that sponge use is learned</option>
                            <option value="H">H. is not accepted by investigators</option>
                        </select>
                    </div>
                    <div class="question" data-question="37">
                        <div class="question-text">37. Observation of the behaviour of their mothers</div>
                        <select name="q37">
                            <option value="" disabled selected>Select an option</option>
                            <option value="A">A. is more frequent amongst female dolphins</option>
                            <option value="B">B. is possibly linked to a physical characteristic</option>
                            <option value="C">C. is only possible in salt water</option>
                            <option value="D">D. is more typical of male dolphins</option>
                            <option value="E">E. is evidence of a dolphin's use of sound</option>
                            <option value="F">F. is a threat to commercial fishing</option>
                            <option value="G">G. is the most likely way that sponge use is learned</option>
                            <option value="H">H. is not accepted by investigators</option>
                        </select>
                    </div>
                    <div class="question" data-question="38">
                        <div class="question-text">38. The continued use of sponges in adulthood</div>
                        <select name="q38">
                            <option value="" disabled selected>Select an option</option>
                            <option value="A">A. is more frequent amongst female dolphins</option>
                            <option value="B">B. is possibly linked to a physical characteristic</option>
                            <option value="C">C. is only possible in salt water</option>
                            <option value="D">D. is more typical of male dolphins</option>
                            <option value="E">E. is evidence of a dolphin's use of sound</option>
                            <option value="F">F. is a threat to commercial fishing</option>
                            <option value="G">G. is the most likely way that sponge use is learned</option>
                            <option value="H">H. is not accepted by investigators</option>
                        </select>
                    </div>
                    <div class="question" data-question="39">
                        <div class="question-text">39. A tendency to hunt for fish in groups</div>
                        <select name="q39">
                            <option value="" disabled selected>Select an option</option>
                            <option value="A">A. is more frequent amongst female dolphins</option>
                            <option value="B">B. is possibly linked to a physical characteristic</option>
                            <option value="C">C. is only possible in salt water</option>
                            <option value="D">D. is more typical of male dolphins</option>
                            <option value="E">E. is evidence of a dolphin's use of sound</option>
                            <option value="F">F. is a threat to commercial fishing</option>
                            <option value="G">G. is the most likely way that sponge use is learned</option>
                            <option value="H">H. is not accepted by investigators</option>
                        </select>
                    </div>
                    <div class="question" data-question="40">
                        <div class="question-text">40. The clever behaviour of the dolphins</div>
                        <select name="q40">
                            <option value="" disabled selected>Select an option</option>
                            <option value="A">A. is more frequent amongst female dolphins</option>
                            <option value="B">B. is possibly linked to a physical characteristic</option>
                            <option value="C">C. is only possible in salt water</option>
                            <option value="D">D. is more typical of male dolphins</option>
                            <option value="E">E. is evidence of a dolphin's use of sound</option>
                            <option value="F">F. is a threat to commercial fishing</option>
                            <option value="G">G. is the most likely way that sponge use is learned</option>
                            <option value="H">H. is not accepted by investigators</option>
                        </select>
                    </div>
                    <p><strong>List of Endings</strong><br>
                        A. is more frequent amongst female dolphins<br>
                        B. is possibly linked to a physical characteristic<br>
                        C. is only possible in salt water<br>
                        D. is more typical of male dolphins<br>
                        E. is evidence of a dolphin's use of sound<br>
                        F. is a threat to commercial fishing<br>
                        G. is the most likely way that sponge use is learned<br>
                        H. is not accepted by investigators</p>
                </div>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-nav">
                <div class="progress-items">
                    <div class="progress-item current" data-question="27">27</div>
                    <div class="progress-item" data-question="28">28</div>
                    <div class="progress-item" data-question="29">29</div>
                    <div class="progress-item" data-question="30">30</div>
                    <div class="progress-item" data-question="31">31</div>
                    <div class="progress-item" data-question="32">32</div>
                    <div class="progress-item" data-question="33">33</div>
                    <div class="progress-item" data-question="34">34</div>
                    <div class="progress-item" data-question="35">35</div>
                    <div class="progress-item" data-question="36">36</div>
                    <div class="progress-item" data-question="37">37</div>
                    <div class="progress-item" data-question="38">38</div>
                    <div class="progress-item" data-question="39">39</div>
                    <div class="progress-item" data-question="40">40</div>
                </div>
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prev-btn" disabled><i class="fas fa-arrow-left"></i>
                        Previous</button>
                    <button class="btn btn-secondary" id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-submit" id="submit-btn">Submit Test <i
                            class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <h2>Test Results</h2>
            <div class="score-display" id="score-display">0/14</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <span>Passage 3:</span>
                    <span id="passage3-score">0/14</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="close-modal">Close</button>
                <button class="btn btn-primary" id="review-answers">Review Answers</button>
            </div>
        </div>
    </div>

    <script>
        // Correct Answers for Questions 27-40
        const correctAnswers = {
            q27: "YES",
            q28: "YES",
            q29: "NO",
            q30: "NOT GIVEN",
            q31: "B",
            q32: "C",
            q33: "D",
            q34: "C",
            q35: "A",
            q36: "H",
            q37: "G",
            q38: "A",
            q39: "D",
            q40: "B"
        };

        let lastSelection = null;
        let highlightTarget = null;
        let currentPanel = null;
        let submitted = false;
        let currentQuestion = 27;
        let isResizing = false;
        let seconds = 20 * 60; // 20 minutes for one passage
        let timerInterval;

        const highlightBtn = document.getElementById('highlight-btn');
        const removeHighlightBtn = document.getElementById('remove-highlight-btn');
        const passagePanel = document.querySelector('.passage-container');
        const questionsPanel = document.getElementById('questions');
        const resizer = document.getElementById('resizer');
        const submitBtn = document.getElementById('submit-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resultsModal = document.getElementById('results-modal');
        const scoreDisplay = document.getElementById('score-display');
        const passage3Score = document.getElementById('passage3-score');
        const closeModalBtn = document.getElementById('close-modal');
        const reviewBtn = document.getElementById('review-answers');
        const timerElement = document.querySelector('.timer span');
        const timerContainer = document.querySelector('.timer');

        // Timer
        function updateTimer() {
            seconds--;
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 2 * 60) {
                timerContainer.classList.add('warning');
            }
            if (seconds <= 0) {
                clearInterval(timerInterval);
                if (!submitted) {
                    alert('Time is up! Submitting your test.');
                    submitTest();
                }
            }
        }

        // Highlight functionality
        function getValidSelection() {
            const sel = window.getSelection();
            if (!sel.rangeCount || sel.isCollapsed) return null;
            const range = sel.getRangeAt(0);
            if (passagePanel.contains(range.commonAncestorContainer)) {
                currentPanel = passagePanel;
            } else if (questionsPanel.contains(range.commonAncestorContainer)) {
                currentPanel = questionsPanel;
            } else {
                return null;
            }
            return range;
        }

        function showHighlightBtn(range) {
            const rect = range.getBoundingClientRect();
            highlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            highlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            highlightBtn.style.display = 'block';
        }

        function hideHighlightBtn() {
            highlightBtn.style.display = 'none';
        }

        function showRemoveBtn(span) {
            const rect = span.getBoundingClientRect();
            removeHighlightBtn.style.top = (window.scrollY + rect.top - 35) + 'px';
            removeHighlightBtn.style.left = (window.scrollX + rect.left) + 'px';
            removeHighlightBtn.style.display = 'block';
            highlightTarget = span;
        }

        function hideRemoveBtn() {
            removeHighlightBtn.style.display = 'none';
            highlightTarget = null;
        }

        highlightBtn.addEventListener('click', () => {
            if (lastSelection) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(lastSelection.extractContents());
                lastSelection.insertNode(span);
                window.getSelection().removeAllRanges();
                hideHighlightBtn();
            }
        });

        removeHighlightBtn.addEventListener('click', () => {
            if (highlightTarget) {
                const parent = highlightTarget.parentNode;
                while (highlightTarget.firstChild) {
                    parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                }
                parent.removeChild(highlightTarget);
                hideRemoveBtn();
            }
        });

        document.addEventListener('selectionchange', () => {
            hideHighlightBtn();
            hideRemoveBtn();
            const range = getValidSelection();
            if (range) {
                lastSelection = range;
                showHighlightBtn(range);
            } else {
                lastSelection = null;
            }
        });

        [passagePanel, questionsPanel].forEach(panel => {
            panel.addEventListener('scroll', () => {
                hideHighlightBtn();
                hideRemoveBtn();
            });
        });

        document.addEventListener('mousedown', (e) => {
            if (e.target !== highlightBtn && e.target !== removeHighlightBtn) {
                hideHighlightBtn();
                hideRemoveBtn();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('highlight')) {
                e.preventDefault();
                showRemoveBtn(e.target);
            }
        });

        // Resizer
        resizer.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            document.body.style.userSelect = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const container = document.querySelector('.main-content');
            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const containerWidth = containerRect.width;
            const leftPercentage = (mouseX / containerWidth) * 100;
            const rightPercentage = 100 - leftPercentage;
            if (leftPercentage >= 30 && leftPercentage <= 70) {
                document.querySelector('.passage-container').style.flex = leftPercentage + '%';
                document.querySelector('.questions-container').style.width = rightPercentage + '%';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
            }
        });

        // Navigation
        function scrollToQuestion(num) {
            const el = document.querySelector(`[data-question="${num}"]`) || document.querySelector(`select[name="q${num}"]`) || document.querySelector(`input[name="q${num}"]`);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            updateCurrentQuestion(num);
        }

        function updateCurrentQuestion(num) {
            currentQuestion = num;
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('current');
                if (item.dataset.question == num) item.classList.add('current');
            });
            prevBtn.disabled = num <= 27;
            nextBtn.disabled = num >= 40;
        }

        document.querySelectorAll('.progress-item').forEach(item => {
            item.addEventListener('click', () => {
                scrollToQuestion(parseInt(item.dataset.question));
            });
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestion > 27) scrollToQuestion(currentQuestion - 1);
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestion < 40) scrollToQuestion(currentQuestion + 1);
        });

        // Event listener for marking questions as answered
        document.querySelectorAll('select, input[type="radio"]').forEach(input => {
            input.addEventListener('change', () => {
                if (submitted) return;
                const qNumMatch = input.name.match(/^q(\d+)$/);
                if (qNumMatch) {
                    const qNum = parseInt(qNumMatch[1]);
                    const item = document.querySelector(`.progress-item[data-question="${qNum}"]`);
                    if (item && !item.classList.contains('answered')) {
                        const value = input.tagName === 'INPUT' ? input.value : input.value;
                        if (value) {
                            item.classList.add('answered');
                        }
                    }
                }
            });
        });

        submitBtn.addEventListener('click', submitTest);

        function submitTest() {
            if (submitted) return;
            if (!confirm('Are you sure you want to submit?')) return;
            submitted = true;
            clearInterval(timerInterval);
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submitted';
            let score = 0;
            const results = {};

            // Process questions 27-35 (radio buttons)
            for (let i = 27; i <= 35; i++) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const checkedRadio = document.querySelector(`input[name="${key}"]:checked`);
                if (checkedRadio) {
                    userAnswer = checkedRadio.value;
                    isCorrect = userAnswer === correctAnswers[key];
                    document.querySelectorAll(`input[name="${key}"]`).forEach(radio => {
                        radio.disabled = true;
                    });
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            // Process questions 36-40 (dropdowns)
            for (let i = 36; i <= 40; i++) {
                const key = `q${i}`;
                let userAnswer = '';
                let isCorrect = false;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (selectEl && selectEl.value !== '') {
                    userAnswer = selectEl.value;
                    isCorrect = userAnswer === correctAnswers[key];
                    selectEl.disabled = true;
                }
                if (isCorrect) score++;
                results[key] = { userAnswer, correct: correctAnswers[key], isCorrect };
            }

            scoreDisplay.textContent = `${score}/14`;
            passage3Score.textContent = `${score}/14`;
            for (let i = 27; i <= 40; i++) {
                const item = document.querySelector(`.progress-item[data-question="${i}"]`);
                const res = results[`q${i}`];
                if (item && res) {
                    item.classList.remove('current', 'answered');
                    item.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                }
            }
            window.testResults = results;
            resultsModal.style.display = 'flex';
        }

        function showCorrectAnswers() {
            if (!submitted) return;
            document.querySelectorAll('.answer-indicator').forEach(el => el.remove());

            // Process questions 27-35 (radio buttons)
            for (let i = 27; i <= 35; i++) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const targetElement = document.querySelector(`[data-question="${i}"] .options`);
                if (!targetElement) continue;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }

            // Process questions 36-40 (dropdowns)
            for (let i = 36; i <= 40; i++) {
                const key = `q${i}`;
                const res = window.testResults[key];
                if (!res) continue;
                const selectEl = document.querySelector(`select[name="${key}"]`);
                if (!selectEl) continue;
                const targetElement = selectEl.parentNode;
                const div = document.createElement('div');
                div.className = 'answer-indicator';
                div.classList.add(res.isCorrect ? 'correct' : 'incorrect');
                div.style.display = 'inline-block';
                div.style.marginLeft = '10px';
                if (res.isCorrect) {
                    div.innerHTML = `<i class="fas fa-check"></i> Correct! You chose: <strong>${res.userAnswer || 'No answer'}</strong>`;
                } else {
                    const userDisplay = res.userAnswer || 'No answer';
                    div.innerHTML = `<i class="fas fa-times"></i> Incorrect. You chose: <strong>${userDisplay}</strong><br><strong>Correct:</strong> ${res.correct}`;
                }
                targetElement.appendChild(div);
            }
        }

        closeModalBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
        });

        reviewBtn.addEventListener('click', () => {
            resultsModal.style.display = 'none';
            showCorrectAnswers();
            scrollToQuestion(27);
        });

        function startTest() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testContainer').classList.remove('hidden');
            timerInterval = setInterval(updateTimer, 1000);
        }

        setTimeout(() => {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }, 2000);
    </script>
</body>

</html>